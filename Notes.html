<!DOCTYPE html>
<html>
<head>
<title>Notes.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="section-4">Section 4</h1>
<p>All notes for the tutorial will be here</p>
<h2 id="makefiles">Makefiles</h2>
<p>Makefiles are tools used for automating the building task.
They have variables called <strong>Macros</strong></p>
<p>A macro can be initialized as</p>
<pre class="hljs"><code><div>CC = gcc
</div></code></pre>
<p>conventionaly CC is the program to be executed. We can define any value as a macro</p>
<pre class="hljs"><code><div>CC = gcc
CFLAGS = <span class="hljs-string">" -v "</span>
</div></code></pre>
<p>Then we have something called a process. A process can be defined with the files that are being affected.</p>
<pre class="hljs"><code><div><span class="hljs-section">main: main.c function.c</span>
    <span class="hljs-variable">$(CC)</span> <span class="hljs-variable">$?</span> <span class="hljs-variable">$(CFLAGS)</span> -o <span class="hljs-variable">$@</span>.o
</div></code></pre>
<p>Tha make program will just fill in the macros and execute any command. The Macros will be distributed as:</p>
<ul>
<li><code>$(CC)</code> and <code>$(CFLAGS)</code> will split out the values of the variables</li>
<li><code>$?</code> will give the changed filenames.</li>
<li><code>$@</code> will give the current process name in this case <em>main</em></li>
</ul>
<h2 id="variable-scopes">Variable Scopes</h2>
<h3 id="global-variables">Global variables</h3>
<p>Global variables are defined in the top of a file and outside of any function</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>


<span class="hljs-keyword">int</span> multip = <span class="hljs-number">10</span>; <span class="hljs-comment">// This is a global variable </span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printmult</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"The Multiplier is %d\n"</span>,multip);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,multip);
    printmult();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p><em>Here all the functions inside the file can access the variable</em></p>
<h3 id="external-variables">External variables</h3>
<p>External variables are variables which are declared in a file and can be accessed across any file in the project.</p>
<p>This is the <em>fun.c</em> file</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> myextern;  <span class="hljs-comment">// The external variable is defined here</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getmyextern</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,myextern);
}
</div></code></pre>
<p>The <em>main.c</em> file is:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>

<span class="hljs-keyword">int</span> myextern = <span class="hljs-number">10</span>; <span class="hljs-comment">// This is the initialisation</span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,myextern); <span class="hljs-comment">// Output: 10</span>
    getmyextern(); <span class="hljs-comment">// Output: 10</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="header-file-uses">Header file uses</h2>
<ul>
<li>
<p>A program can be divided into individual files and that can be maintained easyly.</p>
</li>
<li>
<p>Macros , functions , enums and structers are all can be defined in a header file
eg:</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> hello;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">myfunc</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getmyextern</span><span class="hljs-params">()</span></span>;
</div></code></pre>
<h2 id="memory-types">Memory types</h2>
<h3 id="stack-memory">Stack memory</h3>
<ul>
<li>Memory that is used inside a function.</li>
<li>Locally available so easy to track.</li>
<li>Uses LIFO (last in first out) method to save variables.</li>
<li>Allocated and freed automatically.</li>
</ul>
<h3 id="heap-memory">Heap memory</h3>
<ul>
<li>Have a hierarchial structure.</li>
<li>A larg pool which is used dynamicaly</li>
<li>Managed by programer (not automatic)</li>
<li>Accessed using pointers</li>
<li>Created using <code>malloc()</code></li>
<li>Deleted using <code>free()</code></li>
<li>Restriction is only the physical size of memory.</li>
<li>Global</li>
<li>Slower</li>
</ul>
<h3 id="how-to-selct">How to selct</h3>
<table>
<thead>
<tr>
<th>Stack</th>
<th>Heap</th>
</tr>
</thead>
<tbody>
<tr>
<td>For small memory</td>
<td>When need larger memory</td>
</tr>
<tr>
<td>When only need to persist when the function is alive</td>
<td>When to keep the data for a long time</td>
</tr>
<tr>
<td>Easier and faster</td>
<td>When to allocate data dynamically (arrays,struct)</td>
</tr>
</tbody>
</table>
<h1 id="section-5">Section 5</h1>
<h2 id="storage-classes">Storage classes</h2>
<p>classified with respect to it's scope,visiblity and lifetime.</p>
<h3 id="auto-variable">Auto variable</h3>
<ul>
<li>The lifetime is defined automatically.</li>
<li>A variable in a function or loop is defaultly automatic.</li>
<li>Because the default <code>auto</code> keyword is not used that much.</li>
</ul>
<p>eg:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">10</span>;i++){
        <span class="hljs-keyword">auto</span> <span class="hljs-keyword">int</span> age = <span class="hljs-number">18</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>,age);
    }
    <span class="hljs-comment">// age is destroyed when exited the loop </span>
}
</div></code></pre>
<h3 id="extern-variable">Extern variable</h3>
<ul>
<li>The lifetime is as the program exits.</li>
<li>Can initialize an external variable with a legal value where it declared.</li>
<li>Can be accessed within files.</li>
<li>every fle must reinitialize them to use. But the value will be same everywhere.</li>
</ul>
<p>fun.c file:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> myextern;  <span class="hljs-comment">// The extern varable is defined</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getmyextern</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,myextern); <span class="hljs-comment">// can be accessed in the same file</span>
}
</div></code></pre>
<p>main.c file:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>


<span class="hljs-keyword">int</span> myextern = <span class="hljs-number">10</span>;  <span class="hljs-comment">// The variable is initialized.</span>


<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,myextern); <span class="hljs-comment">// can be used in the same file</span>
    getmyextern();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

</div></code></pre>
<p>When using arrays we dont have to give the dimention of the size while defining an extern variable.</p>
<p>fun.c file:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">extern</span> <span class="hljs-keyword">char</span> password[];
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printpass</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>,password);
}
</div></code></pre>
<p>main.c file:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>

<span class="hljs-keyword">char</span> password[<span class="hljs-number">30</span>] = <span class="hljs-string">"12345"</span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printpass</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>,password);
    printpass();
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>for multi-dimentional arrays we have to specify the second size of the array.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> data[][<span class="hljs-number">10</span>];
</div></code></pre>
<p>This denotes a multi dimentional array with 10 fixed columns and as many rows as we initialize.</p>
<p>We can make functions also</p>
<h1 id="section-6">Section 6</h1>
<h2 id="advanced-datatypes">Advanced Datatypes</h2>
<h3 id="variable-length-arrays">Variable length arrays</h3>
<p>A variable length array have the length of an expression executed at the runtime.
It doesn't mean you can modify that after we create.
Just means that we can give a variable at the position of the size f the array.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">int</span> <span class="hljs-built_in">size</span>;
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;<span class="hljs-built_in">size</span>);
    <span class="hljs-keyword">int</span> arr[<span class="hljs-built_in">size</span>];
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"array of %d elements created."</span>,<span class="hljs-built_in">size</span>);
}
</div></code></pre>
<h3 id="flexible-array-members">Flexible array members</h3>
<p>Flexible array membes is a technique where we can specify the length of the array in runtime and also we can modify it. Here is an example code.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">flexarr</span>
{</span>
    <span class="hljs-keyword">int</span> arraysize;
    <span class="hljs-keyword">int</span> <span class="hljs-built_in">array</span>[];
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> desiredSize = <span class="hljs-number">5</span>;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">flexarr</span> * <span class="hljs-title">ptr</span>;</span>
    ptr = <span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(struct flexarr) + desiredSize + <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="complex-numbers">Complex Numbers</h3>
<p>A number in the form of <em>a+ib</em></p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;complex.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">double</span> <span class="hljs-built_in">complex</span> var = <span class="hljs-number">12</span>+<span class="hljs-number">10</span>*I;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Real part : %f\nImaginary part : %f"</span>,creal(var),cimag(var));
    
    <span class="hljs-keyword">double</span> <span class="hljs-built_in">complex</span> sum = var + var;
    
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nSum is : %f+%fi"</span>,creal(sum),cimag(sum));
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

</div></code></pre>
<h3 id="designated-initialization">Designated Initialization</h3>
<p>Designated initializers are used to initialize only some certain members of the array. For example:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">int</span> arr[<span class="hljs-number">6</span>] = {[<span class="hljs-number">0</span>]=<span class="hljs-number">100</span>,[<span class="hljs-number">4</span>]=<span class="hljs-number">20</span>};
<span class="hljs-comment">// Output: 100 0 0 0 20 0 </span>
</div></code></pre>
<p>This initializes only 0th position and 4th position. All other elements are set to be zero.</p>
<p>Also we can specify a range of numbers to initialize.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">int</span> arr2[<span class="hljs-number">22</span>] = {[<span class="hljs-number">0</span> ... <span class="hljs-number">9</span>] = <span class="hljs-number">1</span>,[<span class="hljs-number">10</span> ... <span class="hljs-number">20</span>] = <span class="hljs-number">11</span>,[<span class="hljs-number">21</span>]=<span class="hljs-number">111</span>};
<span class="hljs-comment">// Output: 1 1 1 1 1 1 1 1 1 1 11 11 11 11 11 11 11 11 11 11 11 111</span>
</div></code></pre>
<p>Similiar will work in struct also.</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span>{</span>
    <span class="hljs-keyword">char</span> * name;
    <span class="hljs-keyword">int</span> age;
};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">person</span> <span class="hljs-title">p1</span> = {</span>.name = <span class="hljs-string">"Vijay"</span> , .age = <span class="hljs-number">20</span>};
}
</div></code></pre>
<h3 id="what-you-know">What you know</h3>
<p>What is the output of the following program?#define NUMBER 55 #define NUMBER2 20 int main() { int i = NUMBER &gt; NUMBER2; printf(&quot;%d&quot;, i); }</p>
<p>What will be the output of the following program?#include&lt;stdio.h&gt; #define x 4 int main() { int y; y= x<em>x</em>x; printf(&quot;%d&quot;,y); return 0; }</p>
<p>Write a preprocessor directive to accomplish each of the following:Define symbolic constant YES to have the value 1</p>
<p>The keyword typedef is used to define a new data type (T/F)</p>
<p>What will be the output of the following program?typedef int integer; int main() { int i = 22, *ptr; float f = 33; integer j = i; ptr = &amp;j; printf(&quot;%d\n&quot;, *ptr); return 0; }</p>
<p>We want to declare x, y and z as pointers of type int. The alias name given is: int_ptrThe correct way to do this using the keyword typedef is:</p>
<p>One of the major differences between typedef and #define is that a typedef interpretation is performed by the _________________ where as a #define interpretation is performed by the _____________.</p>
<p>Declare an array of 100 ints and initialize it so that the last element is -1</p>
<p>An array whose length is defined in terms of a value determined at execution time is a __________.</p>
<p>A variable-length array can change in size during its lifetime. (T/F)</p>
<p>If you include the &lt;complex.h&gt; header, you can use the complex type (T/F)</p>
<h3 id="what-you-should-review">What you should review</h3>
<p>What will be the output of the following program?#include&lt;stdio.h&gt; #define int char int main() { int x=8; printf (&quot;sizeof (x) =%d&quot;, sizeof (x)); }</p>
<p>__________ allow us to initialize elements of an array explicitly by using a subscript.</p>
<p>Declare an array of 100 ints and initialize it so that elements 5, 10, 11, 12, and 3 are 101
Continue</p>
<h1 id="section-7">Section 7</h1>
<h2 id="type-qualifiers">Type qualifiers</h2>
<p>Type qualifiers can be used to give more information about the variable to the compiler.
Examples are const,volatile,restrict</p>
<h3 id="const">Const</h3>
<p>const keyword represents a constant variable once it is initialized with a value it cannot be changed.
Trying to do so will produce an error.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> pi = <span class="hljs-number">3.14</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> nums[<span class="hljs-number">2</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>};
    <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> myvarname;
    <span class="hljs-keyword">const</span> myvarname var = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> * ptr;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="volatile">Volatile</h3>
<p>volatile keyword represents that this variable will be changed during runtime so the compiler will supress various optimizations against reduntant assignments.
Also prevents caching of variables.</p>
<p>Chosable when:</p>
<ul>
<li>Programs that have a lot of threading</li>
<li>Programs where resources are scarce</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">double</span> loc1;
    <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">double</span> *ptr1;
    <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> clock;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="restrict">Restrict</h3>
<p>Used as an optimization hint for type qualifiers. In case of pointers, restrict tells to compiler that this pointer is not going to be changed throughout it's lifetime and it is the sole object to save the data. This cancels all the other checks. Also there will be only that pointer which access a specific data. Anyway the compiler can chose to ignore it.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> * <span class="hljs-keyword">restrict</span> ptr2; 
    <span class="hljs-keyword">int</span> * <span class="hljs-keyword">restrict</span> ptr3;
    <span class="hljs-comment">// Cannot have same address</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="what-you-know">What you know</h3>
<ul>
<li>
<p>What will be the output of the following program? #include &lt;stdio.h&gt; void main() { int k = 4; int *const p = &amp;k; int r = 3; p = &amp;r; printf(&quot;%d&quot;, p); }</p>
</li>
<li>
<p>What will be the output of the following program? #include &lt;stdio.h&gt; void main() { int const k = 5; k++; printf(&quot;k is %d&quot;, k); }</p>
</li>
<li>
<p>One of the main use cases for using the volatile type qualifier is to ensure that global variables accessed by multiple tasks within a multi-threaded application are not optimized by the compiler</p>
</li>
<li>
<p>Can a pointer be volatile? Explain your answer.</p>
</li>
<li>
<p>The restrict type qualifier can be applied to all data types (T/F)</p>
</li>
<li>
<p>The restrict type qualifier is not supported by C++  (T/F)</p>
</li>
</ul>
<h3 id="what-you-should-review">What you should review</h3>
<ul>
<li>
<p>Which of the following statements is false?</p>
</li>
<li>
<p>Can a parameter be both const and volatile? Explain your answer.</p>
</li>
<li>
<p>The restrict type qualifier is an optimization hint for the compiler that is must follow (T/F)</p>
</li>
</ul>
<h1 id="section-8">Section 8</h1>
<h2 id="bit-manipulation">Bit Manipulation</h2>
<h3 id="binary-numbers-or-bits">Binary numbers or bits</h3>
<p>bits for the basic datatypes in c are</p>
<table>
<thead>
<tr>
<th>type</th>
<th>bits</th>
<th>values</th>
</tr>
</thead>
<tbody>
<tr>
<td>bool</td>
<td>1</td>
<td>0 to 1</td>
</tr>
<tr>
<td>char</td>
<td>8</td>
<td>-128 to 127</td>
</tr>
<tr>
<td>short int</td>
<td>16</td>
<td>-32768 to 32767</td>
</tr>
<tr>
<td>long int</td>
<td>32</td>
<td>-2,147,483,648 to 2,147,483,647</td>
</tr>
</tbody>
</table>
<h3 id="negative-numbers">Negative numbers</h3>
<p>Negative numbers are represented in the computer using two's complement method. The leftmost bit indicates the sign. If it is 1 then it is a -ve number.
To convert to two's complement, add 1 and complement the result</p>
<ul>
<li>-5  &gt;&gt;&gt;  -4  &gt;&gt;&gt; 00000100 &gt;&gt;&gt; 11111011</li>
</ul>
<p>To convert back:
Complement all the bits, convert it to decimal,give -ve sign and subtract 1.</p>
<ul>
<li>11111011 &gt;&gt;&gt; 00000100 &gt;&gt;&gt; 4 &gt;&gt;&gt; -4 &gt;&gt;&gt; -4-1 = -5</li>
</ul>
<h3 id="bitwise-operators">Bitwise Operators</h3>
<p>Bit manipulation is the act of manipulating data algorithamically that is shorter than a word (2 Bytes).</p>
<p>Use cases of bit manipulation are:</p>
<ul>
<li>Low-level device control</li>
<li>Error detection</li>
<li>Correction algorithms</li>
<li>Data compression</li>
<li>Encryption</li>
<li>Optimization
Bit manipulation is far faster than any basic operation.</li>
</ul>
<p>C offers logical as well as Shifting operators.</p>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>AND</td>
</tr>
<tr>
<td>|</td>
<td>OR</td>
</tr>
<tr>
<td>^</td>
<td>XOR</td>
</tr>
<tr>
<td>~</td>
<td>Ones cpl</td>
</tr>
</tbody>
</table>
<p><em>They are not regular logical operators ( &amp;&amp; , || ).Don't be confused</em></p>
<ul>
<li>
<p>They operate on each bit indepentend of the order ( to left or to right )</p>
</li>
<li>
<p>All except <code>~</code> takes two operators so they are called binary operators.</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{

    <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> a = <span class="hljs-number">154</span>;
    <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> b = <span class="hljs-number">100</span>;
    <span class="hljs-keyword">long</span> <span class="hljs-keyword">int</span> c = <span class="hljs-number">12</span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld"</span>,~(a));
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld"</span>,(a &amp; b));
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld"</span>,(a | b));
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld"</span>,(b ^ c));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="ones-complement">Ones complement</h3>
<p>If you don't know the bit size of a machine (32 or 64 or whatever) setting a bit to zero can be done by using complement method.
eg:</p>
<pre class="hljs"><code><div>// know that w1 = 1 
w1 = w1 &amp; 11111110;
</div></code></pre>
<p>This works fine if the system is 32 bit but what if it not?</p>
<pre class="hljs"><code><div>w1 = w1 &amp; ~(<span class="hljs-number">1</span>);
</div></code></pre>
<p>This works on any machine.
1 is converted to its complement as per the system.</p>
<h3 id="bitwise-shifting-operators">Bitwise shifting operators</h3>
<p>C has leftshift and rightshift operators.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Operator</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&lt;&lt;</td>
<td style="text-align:center">The leftshift operator. Shifts the entire binary to left.</td>
</tr>
<tr>
<td style="text-align:center">&gt;&gt;</td>
<td style="text-align:center">The rightshift operator. Shifts the entire bnary towards right.</td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-keyword">int</span> a = <span class="hljs-number">8</span>; <span class="hljs-comment">// 0000 0000 0000 0000 0000 0000 0000 1000</span>
a = a &gt;&gt; <span class="hljs-number">1</span>; <span class="hljs-comment">// 0000 0000 0000 0000 0000 0000 0000 0100</span>
a = a &lt;&lt; <span class="hljs-number">1</span>; <span class="hljs-comment">// 0000 0000 0000 0000 0000 0000 0000 1000</span>
</div></code></pre>
<p>An example for a stepper motor driver:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">100</span>; j++)
    {
        <span class="hljs-keyword">int</span> a = <span class="hljs-number">8</span>; <span class="hljs-comment">// 0000 0000 0000 0000 0000 0000 0000 1000</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++)
        {
            dectobin(a, <span class="hljs-number">4</span>);
            a = a &gt;&gt; <span class="hljs-number">1</span>;
        }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p><em>If you shift beyond the bitsize of the computer you will get an undefined result</em></p>
<h3 id="bitmasks">Bitmasks</h3>
<p>Bitmask is a data that is used as a data for bitwise operations.</p>
<p>It can be any pattern.
eg: <code>01101100</code></p>
<p>Using bitmaps we can use a single variable to save 32 different boolean values and set each bit on or off or toggle. optimization at it's peak.</p>
<p>Using AND :</p>
<p>Lets say we have a mask <code>00000010</code> Which is binary of 2, Then we can use this to AND with a number and we can set all bit except the 2nd will be set to zero. eg:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> mask = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">int</span> num = <span class="hljs-number">129</span>;
    <span class="hljs-keyword">int</span> result = num &amp; mask;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld masked by %ld is %ld"</span>,dectobinr(num),dectobinr(mask), dectobinr(result));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-comment">//Out: 10000001 masked by 1 is 1</span>
}
</div></code></pre>
<p>Also using OR:</p>
<p>We can set a specific bit without touching others. eg:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> mask = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">int</span> num = <span class="hljs-number">64</span>;
    <span class="hljs-keyword">int</span> result = num | mask;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld masked by %ld is %ld"</span>,dectobinr(num),dectobinr(mask), dectobinr(result));
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-comment">// Out: 1000000 masked by 1 is 1000001</span>
}

</div></code></pre>
<p>Also We can do the opposite of first. Using and and complement we can turn of a specific bit without touching others ( above we did turn off all except one). Just complement the mask and AND it. eg:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{ 
    <span class="hljs-keyword">int</span> mask = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">int</span> num = <span class="hljs-number">255</span>;
    <span class="hljs-keyword">int</span> result = num &amp; (~mask);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld masked by %ld is %ld"</span>,dectobinr(num),dectobinr(mask), dectobinr(result));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-comment">// Out: 11111111 masked by 1 is 11111110</span>
}

</div></code></pre>
<h3 id="packing-data-using-bitops">Packing Data using BitOps</h3>
<p>We can use bitwise opertions to pack datas consisting of boolean values.
For Example let's build a simple yes or no quiz and store the input in a single variable.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;math.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"functions.h"</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> a = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++)
    {
        <span class="hljs-keyword">int</span> temp;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"question? (1 = Yes,0 = No) : "</span>);
        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;temp);
        <span class="hljs-keyword">if</span> (temp == <span class="hljs-number">1</span>)
        {
            a = a | (<span class="hljs-keyword">int</span>)<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>, i);
        }
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nThe integer value is: %d\nBinary number is: "</span>,a);
    dectobin(a, <span class="hljs-number">8</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<pre class="hljs"><code><div>Output:
question? (1 = Yes,0 = No) : 1
question? (1 = Yes,0 = No) : 0 
question? (1 = Yes,0 = No) : 0
question? (1 = Yes,0 = No) : 1
question? (1 = Yes,0 = No) : 1
question? (1 = Yes,0 = No) : 1
question? (1 = Yes,0 = No) : 1
question? (1 = Yes,0 = No) : 1

The integer value is: 249
Binary number is: 11111001
</div></code></pre>
<h3 id="packing-using-bit-fields">Packing using Bit fields</h3>
<p>Bit fields allow us to specify the number of bits an integer can have in a struct.
Using a special syntax we can define a bitfield and define a name to it.
should use explicit declarations like signed or unsigned to avoid hardware issues.</p>
<ul>
<li>Better Memory utilization.</li>
<li>allow us to allocate a specified number of its.</li>
<li>Can easily set and retrive data without any bitwise operations.</li>
</ul>
<p>Eg:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">packed</span>
{</span>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> :<span class="hljs-number">3</span>; <span class="hljs-comment">// Padding</span>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> f1:<span class="hljs-number">1</span>; <span class="hljs-comment">// Just some variables </span>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> f2:<span class="hljs-number">1</span>;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> f3:<span class="hljs-number">1</span>;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> type:<span class="hljs-number">8</span>;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> index:<span class="hljs-number">18</span>;
}; <span class="hljs-comment">// This uses 4bytes</span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">packed2</span>
{</span>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> f1;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> f2;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> f3;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> type;
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> index;
}; <span class="hljs-comment">// This uses 20 bytes </span>


<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lu"</span>,<span class="hljs-keyword">sizeof</span>(struct packed)); <span class="hljs-comment">// Out : 4</span>

    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">packed</span> <span class="hljs-title">p1</span>;</span>

    p1.f1 = <span class="hljs-number">1</span>;  <span class="hljs-comment">// 0000 0000 0000 0000 0000 0000 0000 00010</span>
    <span class="hljs-comment">// These are now easy as just variables.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="what-you-know">What you know</h3>
<p>Convert the following decimal value to binary:123</p>
<p>Convert the following binary values to decimal:00010110</p>
<p>Convert the following binary values to decimal:01001100</p>
<p>The bits in the result of an expression using the __________ operator are set to 1 if the corresponding bits in each operand are set to 1. Otherwise, the bits are set to zero.</p>
<p>The bits in the result of an expression using the __________ operator are set to 1 if exactly one of the corresponding bits in either operand is set to 1. Otherwise, the bits are set to zero.</p>
<p>The __________ and __________ operators are used to shift the bits of a value to the left or to the right, respectively.</p>
<p>Evaluate the following expression; assume each value is 8 bits:~3</p>
<p>Evaluate the following expression; assume each value is 8 bits:3 &amp; 6</p>
<p>Evaluate the following expressions; assume each value is 8 bits:1 | 6</p>
<p>Evaluate the following expression; assume each value is 8 bits:3 ^ 6</p>
<p>Evaluate the following expression; assume each value is 8 bits:7 &gt;&gt; 1</p>
<p>Evaluate the following expression; assume each value is 8 bits:7 &lt;&lt; 2</p>
<p>What will be the output of the following program? #include &lt;stdio.h&gt; int main() { int c = 2 ^ 3; printf(&quot;%d\n&quot;, c); }</p>
<h3 id="what-you-should-review">What you should review</h3>
<p>Convert the following decimal value to binary:5</p>
<p>Which of the following data types are accepted while declaring bit-fields?</p>
<h1 id="section-9">Section 9</h1>
<h2 id="advanced-control-flow">Advanced control flow</h2>
<h3 id="the-goto-statement">The <code>goto</code> statement.</h3>
<p>Causes a program to jump to a particular line of code.
A label is needed and it follows same naming rules as a variable.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,index);
        <span class="hljs-keyword">if</span> (index == <span class="hljs-number">100</span>)
        {
            <span class="hljs-keyword">goto</span> <span class="hljs-built_in">exit</span>;
        }
        index++;
    }
    <span class="hljs-built_in">exit</span>:<span class="hljs-built_in">printf</span>(<span class="hljs-string">"The loop finished "</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>We can also provide multiple statements to a label.</p>
<pre class="hljs"><code><div><span class="hljs-built_in">exit</span>:
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"The loop finished "</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nExitting...."</span>);
</div></code></pre>
<h3 id="problems-of-goto">Problems of <code>goto</code></h3>
<ul>
<li>
<p>Inturrupts the natural flow of the code so it is harder to follow and maintain.</p>
</li>
<li>
<p>Using many goto together makes the program impossible to follow</p>
</li>
</ul>
<h3 id="avoiding-goto">Avoiding goto</h3>
<p>We are not required to use a <code>goto</code> statement in our codes except some programming languages like fortran etc ...</p>
<table>
<thead>
<tr>
<th style="text-align:center">Need</th>
<th style="text-align:center">Method</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">To skip an iteration</td>
<td style="text-align:center"><code>continue</code></td>
</tr>
<tr>
<td style="text-align:center">To breakout the loop</td>
<td style="text-align:center"><code>break</code></td>
</tr>
<tr>
<td style="text-align:center">When to exit multiple nested loops at one time</td>
<td style="text-align:center"><code>goto</code></td>
</tr>
</tbody>
</table>
<h3 id="the-null-statement">The Null Statement</h3>
<p>Null statement differs from null pointer or object. It is a statement that can be told when you need to do absolute nothing and you don't want a syntax error. Null statement is essentially just a <code>;</code> and C will interpret any semicolon as an end of statement. Eg:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">while</span>(*<span class="hljs-built_in">text</span>++ = getchar() != <span class="hljs-string">'\n'</span>){
    <span class="hljs-comment">// Empty</span>
}
</div></code></pre>
<p>This generates an empty body loop syntax error. There we can use the null statement.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">while</span>(*<span class="hljs-built_in">text</span>++ = getchar() != <span class="hljs-string">'\n'</span>){
    ; <span class="hljs-comment">// Null statment</span>
}
</div></code></pre>
<h3 id="the-comma-operator">The comma operator <code>,</code></h3>
<p>Don't be confused with normal seperator commas, This comma can used to put operations in place of expressions. Eg:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">while</span>(i&lt;<span class="hljs-number">100</span>){
    sum += data[i] ,i++;
    <span class="hljs-comment">// This will add and save data[i] and then increment i.</span>
}
</div></code></pre>
<p>Another example when using paranthasis:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">int</span> j = (f1(),f2());
<span class="hljs-comment">// f1() will be executed first and then f2() will be executed and then the result of f2() will be saved to j.</span>
</div></code></pre>
<p>Another one:</p>
<pre class="hljs"><code><div>x = (y=<span class="hljs-number">3</span>,(z= ++y + <span class="hljs-number">2</span>) + <span class="hljs-number">5</span>);
<span class="hljs-comment">// Here y=3 will execute first then y incremented and added by 2 and that value stored in z. and then add it with 5 and stored to x. So x will be 11.</span>
</div></code></pre>
<p>Can be appied in loops:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>,j=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">10</span>;i++,j++);
<span class="hljs-comment">// This loop will increment both i and j.</span>
</div></code></pre>
<p>Also if we need to run functions just use a comma <img class="emoji" alt="smiley" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAWaUlEQVR4Xu2bebAlV33fP79zum/fe9+99+3z3qyaGc0iCQ3LzEhIMpalICQKx0JYyEAkgTEJlAtX4qLKdhHsgBIndoWYONj8gR0gWAI5BoPAC7KQUyJG20gapAgxZvbhzfZm3r7crfuck+5TXdXFvEUjBymqsk/Vd86dmdPn/j7f/p2tXz9xzvGPuSj+UZd/MuCfDAh4mcs9Iuquu9gaOHaheI0I2wRGlZY+HFUAhKY1bsbBWec4jOWFRHj+vvs4+nHnLC9jeVkmQUnLsbu52gm3hpqbVShX6FBVVUmhSoIoAS0AhYzDWYftZrKY2DZt7H4QGx4Sxze33Ms+l5ZXtQHP3CrVwT5+QWl+qVRWP6UrSqmqRkUZuEOURbRLJSAXGOAczmQSnFXYrmA7Fts0mJa13bZ91Bo+PznDn+35pmu+quaAR26U4Ph75RdHhuXJakN/oWc0+ulofaSidQHRsKM0rCmNDlHe9nqiK28h2vNeytf8MpXr/o1X+tn/W/p/vk3aNrvGX+v7SPvK+sz6zr4j+67sO18VGXDwTrm6HPKfyjX95qA3IGhoJDKockDQtxE1+gbUyB6ktg0pD0BQBdEgAA4AEHCAM5A0ce0p3MJh7Pgz2LPfI5kZw7YTXEeTzBmS2YT2gvnbdsy/3fElt+//iwGSlqN38pFyVe4p9Yc9ui9M2SyqGhCM7EJfcjNq+GqoDORwCWAhNxwBHMt8FkCBBCBAawp7fh/mxEMk489jmwlJU2FmYrrT8WK76T6+9Ut8yqXllTDAgz99B43hCn9Yruu7wqESQa9GVwzBmh3obbej1lwDQRlcF5xBRPEPKc7ZPFtKkLSx557AHP5zknMHMS1NMmuIJ7q0581951v8yt6vMOeNeJkM8PD7b2XtwABfqvYGN4QjKXxdCGppfektqM23I1Ef2DYCSyc6uVhylk6QAKqM68xgj6cmHPkbkoUuybwjHu/SnE0emZrizt3f5MxLMSF4qfBDAzxQHgyvioYjdB2C/n6Cy9+DGvlpcDGSzILIamAvXQ4EIOmA1uhtdyL1TciB+xE1jVJlCDo3KOIH0hhvE5GLNiG4WPgHb6E/hb/fw49m8ELYP0jwmg8g/ZcjZhaQJWP7J1IKFMQBNFFrriYM68gLnwM9SaQjgKuGiO9PY32HiExfjAnBxcAD6rJRPl3uD66P1kTohkrh+wguvxvV2AzxNIgq4HnZDCgywrSQxmaCK+6GA18EmSGyEVh3/WUu+TTwPhGxL2ZCcDHwB+/iI5WGvjNcUyLo0wT1tN76s0htIyQzHh63DHBUgkBDqwPW8pKKUlCJIDHQ6S5vSNLOYvCxcPCrCF2sLVFJ3J0H7zLP7biPTxUmvKRJsIB/7A72bO6X/1VeX+4pDUcEDQg2vgm1/iYgARGE5eBDnt9/mB8eOs0/f+teyrWyh7moEmjaC23+8sGn2bl9Hbt2b4NOvMQEB+DZAuyph0nGvksyB93zHdqn2ovHp90/u+4rPAOsaEKwGvzdI5TX1/lkNBj2hP0hQU2h+0dRQ28Auwg4JKdHfhz+hf2H+K3f/AJTkx0OHjjEb3z03WgsWFYvCkyi+NR//VMe/NZzDAxG/Mfffj+vef3WHzfBgeA8P4iPSS8cBXsWl4S4tulZn3Q/mTK87d5x2kUmXNwQEEB97CbeVanp64MUXtdCVEWhBq8ErcA0EVl+qbOdDv/zyw/RCDpsujTk2Sef46lHL+ean7kCWl1WLaUST33neX/N69NrZxZ8X3zi8rtQ1oJbksJ4LB2gBnfhmufRiRD0GyqL5vqP3WTede+XuBdwwIsZUKT+R6+m0RPJr3v4eqqyoGpDSHUUzAIiDpwsTf1Qc/zQec786BSXDIdEocLE8MRjz3PNdZvBxeBWsT1OfNvhGqxpKHorYdZX2ucYW7cPQ2wAlmaCFaQ64mPU8XlsPfQm9CzYX//o1e4bv7OPWRFxWXmxDFCAfs82bo8aemfQCFCVVJFCautBHGKbK6/1UYnDh04S2A6NckQYCAP1gNNjZ2nNzFKpKjArOKAlbdPM2vprapEQacXEbMf3uXVnL5juSpMZTgIfo2pO+piz2KNGsvM925LbUwO+CDjALG9AcffljQNE9bJ8IGhoVE+ALiskipByL2JbgIUV+Iktp0+fpxIKoU6loFJSzC02GT83xebN9ZVXBK3SNvN0mk36epS/Fi1ZX75P4jbY7iqbpRiyGKMIHXewPf5wRn3OfOCNA+5Pn5zCSJ4GK2WAAPp3r2d3pSp7dS1AlTWqpJBSBVEBmBaIA1Y2YHZ6nigUtAIleCOcSZidmQNXAmNWmv2zNr5tqBVKvCdZX75Pb4BZZQ5xksXoY1Wl2MeeMVSq8d7fvd7tvvEBHgcssKIB3vORmro1rGn/MEOXNBIoCCIgWX0MA1hLu90m0IIIXkrhodutRaABNmb5Evo2GINSKr+erC/fJ7bIgJUlPlYJlI/dVDUZy0iNW8HuAwxgCwMumPy29hNWyu5G8U9yNBIqJBCUDsB2eNF1zBp/B5UIQu6qgADOxjlEsvK1Nkbya4D8s88gsK3CvBWlfKw2EB+7Z6hqKuXkxozt6DRJMQwguHDp+/getkZl2akrGilpVGaA1oDxBuBWMECKk1sUBTQdRXGgAkUYxBDPpUqKTCwwIQiyNr4tDii69H3iukUGrLiSKMD4mFXoPEPGkjF9fI/b+r6HOZCzLmuA3lhnVxCpin+OFwjoPA9dB2yTFTf8LpP17WoNmLQFg3UQhJpaeQoWZyC2yxAIWJW2sb6tdQWntfg+cfNgbA4JwNJYnPMxID52z5CxZEwb63YXcDCHYNkM6KuoK3QkSJhKK0SJFy6GZB5U+YL9qAEbg8tkQMOaYcth42PxSgyEkWKwX3mAFU9KxmZtfNvE2Px6iI3vE+Jx6AKiQUJQqUQXPJBnaZzHnTOEQsaUsYH9+koGqExR4C6VQOHhtYBSxZqfLIJ0QVQBnwlHEYBm44YII4KxDqWETtfSP1qmvxFAe5UxbPFt+odKtM42sRXt+zAivk8sxXfSBSMgujDBWQ8P5LOvZ/AsGVMUJJeScxYGUKz/gA6FNeSpL5LDowpG1y0ARJbeza5l2+YKPX0pRCdGRFhsO153RR0dAq1VjskO32ZH2vax44v01qDVcVlfvk+63R8fcuSGkFAUKSTWM6AFAsGzgfbI+USoLrgy1AF9ko97dDHii71DAY1jqRJHowa73zTAuemEyZmEoFHi2msb0IpBWLkIvk3a1l+TXuv7SPvyfZK45Xf0TnCuqFOuoonHFTKmjA0IV50DlFAWlYM7L8T/UZhQ0IKw1Bfm2tzylj4mZgxHfjDHO9+3gTU1C9MGRFi1xI41/Zbb/9UmvvrFk1x5XcP3xeQCCAV9URWflzkv56EjCjI2QC1nQLFkC3j/XOGA82OriD3vdeUnPwbKswt84P3DtNUo5fkWnFvM4d3qyyjAdJPdW3q44vd2ULYGTs2BsUUbdwG4W6aTIn7AMyEChQFeLrhgLVHG0saQQxucE8TpvFGRGYIDWQZHcnUNcmKSst8GO9AX95TM5QxMzFOeXsh/ZgioAhhZCu/jLDIij9PgZS0Y8GxFT27Zs0BimcsucCZJJeByM6RYZ5VyEAlY5+Vc4Ssur3EFTGHzcmVFZzy4AJqlk1++HRAtgGA7zpvgkMIVDx7nLJaMbbXnAQ6gkzDhHbOZewpnFYKlyBHH7ILlqccT1o0Il25WRI3cAAsY8KYASKF/0ENQDdjCH5RAkJsdw/wUHDhsiGPh6l0BWgvOFkY561KZnMV6NkCWHIZcWkTEAcx25cS62Pm09Q66BKzgFAiCKju+9rU2n/l8m9EBxaYNiu3bFVfsVGzZLN6UWg2kLKBzEilAsKtkgyyzsgqQCLbpmJ2BsVOOI0cdB/7ecPio5eRpy2IC/+3fV9n7uhDbLoYGzjPgEoeLnWcDR47slsuA5MScPbKzq7HGYa1FOZWP9yIdDbChoRiMHBM/Sjh+EP76r6DSA319MLpWs3ZU0hpG1giDg1BvCOVK8aA4LIHWgIM4gaSbykC7Da0mzM45Jifg7LhLBafPWMbPWubnoNuCioZGGTY1NBNNRywOlEGUgC224BmDZ+lCxgaYlY7DFkgePcPRN2+3bWJbdkbhhwOCKEAsAJdsgZ7IURvqY+ueG2m12kycPMTcxBTz8zOMP2fY9xQUx2EPTKUCpciDE+ZGOCCOIUllDLRb3gT/dzwAiEBUhkojYmB9L72jIwyt3YbqLDD+zCP0Bwlr1+Y703y9w4CzeSYnFtOx7YwNiAG7kgHxn7zAyY9cxZFyx73GJXkKofK1FB/RJZvBhQ4zuI4rf+6DlIIAl7RJ4i7NmTMsTE3SWphhdvwIi1Oz/izfac/TmZ9J6wUfVDu2JE0DCGGkUZFQ0pr6aINyT18K3EO5ElEfXkN9aAuVnlpajxLVBglKJSSoMHHqGIf2P8rQSMLwEGAcqAwYHOBjj52fIBdaHMnYVjPAAZ3FmHh8Tp4YzAzwTXMBCGBgwzphYKPi6InjzE+cZP2m7agopFQqEW3aSpjWQRCgtUJEobTCJV1M3MSktQCCFCdrBeBwgA4rXojGp6+zmMSQJAndTodOp0XcjUEFjI8d5FS2Z7g2pKcOdhaQIk5vRKaWI2NajD1RZ+kQKCbCGGg9PGa/u2Ojen/Qdsp08RMfThAFDqjW4bVXBTx73yJ/99Cfcdudv8rQ8AhBoFEC4gwKRagDb0QYhqnqlEpr0UHo2+nMIAGAxFiM8ZAkcUw37qaQXTx0Cuuwvs9AK1Slig4SThw9yKMPfxWlYe81CiygQBxYBxiHyeDbjqTtbMYEtIA4Y13pFRkLND/1FH8/Neu+b5oW17XY2IEFBDxhF274Gc26Yc2hfQ/xh//hQ9z/+d/j/+x/gsXFRaJyhWpPnUq1RikqEwQhWmuKE6RFUlEs+DhrvESEQOvMNH9tT62W9lUjCCOmJs/zxN99my/8wT388X/+FeZPHeGyywLe8FoFHRDvPmDAJg7XsZiWJWPJmIAmYFd7LG6B1lxM69nT7oGbh+1rXVtBFbA+TiQQ6Dp2bBOu/SnNs49CqzPG/oe/zOPf/jK9QxvYsPlyLrtyNxsv2cHmbTtZM7KOWi0zpJeoFHJhCYLAC2Cx2UpNXGBhYYFTY0c5cewIxw+/wMED3+PMiR/Smp+iFsDaOqiy5pa3BdSq4NoAAhYweep3HG7ekrFkTOC1ggHFMGgBcx/7Lt9540Z7fKDXblYVQVVASgq0AxHoOG57V8CpH1h6gpCdQzAXW6aaJzn7wkkOPfNtDBBWqvTUB+kbGGZgzTr6B0YolatUUkWlEs5lBrbotFu0mvNMT5xh8vwZZqcnaC1MknRiIgWNClxSg4HBFFgL8aKjsll481sULDrwW25SCT5rWxYzb9N+7PGMBZgDWhfzg5EEmD8yy/zjY+5P3tpn/53uUdgKqAgIBTTQxm98bnxnyL6vxGzoUyit6VpFy8Bi4liMHc24RbM7Rmt8jB+N7edwAsbm4zSTeKEBrSEKoFKCDamqo0JPqFMpqgFUNIQidDqOMzG845dCqiHgBEHACi5/7moWHGbGkjFkLOCVLL8VXpoFC8DML/8t33lird2/tm52S9VnASpUoAUJgVnHLW/XnD1hmf6+Yf2wohQITsBYIXaOxCq6lrSG2Hl4/OrqKHbXgJZ8p6u8x4TKf6aU1SJo8dfQ7sLZSceb7gi5cpfAOQciuAw+gXzck8waxifs/owBmAEWXsoPRzvAzGyb3s8+6z7zGw3zGamoskRCGFiUVhCAWCHoWO74cMi9n4RzpyzrhhVR6IEQkeJUCljnLjil5pJifhUyCSLgRfFccbHjOD3t2PmWgJvfoWHCgCh8fwZs2/qhkcxa2lOmncWeMswBMzkTL25AkQVzwOTvP82RGzbK566vmA/rSLChQgILgaQCaUGj1/KeXyvx1T+IOXXMsnZYqOQ7Pa1ACtJVXvsQYOl53+QPRRe6KfyUY9tNAW9/b4CaMmBU/hgQXNtiU3ibwptJw5PH5HO//7Q7AkwCcxf/fkChLjAFVG/7uv3GU3XZvi1MbiYMQBRKCSoARJB5RzpZcmdqwl/fG3PiyYSRXqFeE0qSmyAXosqKh0DncngLnZhsGWMmdlz17hI3vFUhEwY6+aTXBdsCO++IZyzd8wlHxuxDt33dfQOYyBm6AKsasMpcMAVU7v5L90cP3G7XjGjzevIxKlohCE5AZqGnx/DOD4Y8faVm3zdjZs87BnuhWhHvm1KgAN9+OXgHNr/r3QQWFh1TKVh9s+a2O0K2bQXOWegKLgZfNx12zhJPpzpnsmH4bBYrMO3hlx37hfQnPvEJVirp/7l77rnHAEy00M+e5/s3jborKophAkEE8DAKEIhBWo71OxQ7rguII+H0acfMtKMbCw6wgPMSbCHi/G4vtv0dZ6oJekSx5+0lbv6FkOGK9fAuFjx4W7BNm8I7PPx4Bm8O/Mtvud/ZP84p4AwwlbJ3/59flBSROjACrH/TRtZ99hb5tXWb1BvC0QDdqwjqgvQoJAIJHRIAPcCAZqElHD5gOfqcYXrM0p13kBTDorjroCKI+hQjWxVbX6fZuk0oWQuTFjr5JjIRXAtc05LMO8ysJT6bcHrMfu9DD7r/8t2TnAROA+Mp2/xP7E1REekH1gCj23sZuv82+eDWTermcFij+1VugqDKApHkr8UDVaChIFI02zA97ZibhsUZR9x1AERVod4vNHqF/gEoBQ4WLcw6PLj14NB12LbDLTiSfJ2PzxsO/8h++1/8hfvvh6c4C17nU65pgJ+kAQL0A8N5NjT+/OfV26671L2/MqjLwaBGNwRdU0gZJBKkBBKACKDxxlABQoFAipOIARLnAWllNWBy8Kzu5tvaFphFi5lzJFOG1qRpP3ZEvnD71+y3gBlgPIMHZlxaXo53hRXQCwzlRgz86z1s+dAe+cW1o2q3HlAEfQqVZUJFpQIJMwloEA/tQFY4hjnAb2jyM33sPLxt47e2Nl/jzZTlzFm7/7PPuP/x6Wc4Ckzl4JPAbMpkX9a3xYE6MJirv6Kpf+atXHfDFvn5viG1RfcqdF2hqoJUBF0CSuLNQIOoYtcD5OAOH7bJwIGOw3T9WR7bdJgF68f7zIQ99sgx97UPP8hjLcM8MO3BvZh3aXmlfl+glmdDP9AHNNbXqP32Dey9dqPcMtgvu4KakswEXVXFkPDZgJdSAGBzcFye6nnKm6b18MmCdZNT7vnHT7q/+c1HePrUAguQ7/BgOr/rC6/4b4yISJRnQyM3oQ7UgOBX97LlZ7ervVv63d5anc2liopUJBAKEoAKfjwD/Pk9AfJHWN2W7SzMc/zYtDz9V4fs0+mO9BiQgIefz+Hn8rveAXjFDSjmBSoevlAV6AEiDerndrDm+o2s3zmoNg5V3bpqyEAUUAs1EUBs6HQSFpoxUxNNOf3DSTv2v8c49RcHOWfAAh1gEWh6+EKtYry/0gYsNSLIjejJVc2NKQOlXDqXLWoAFGCK2qubqw20cvjFTDl48ur7vcHCiAgo56p4+EIaUHlNIQxgC/hcHp52rs4S8FeVAUtXi/ACBb4uDChmgcKAGEh8TSFXBMqr24DV5woNKK/lz0M2l/Fj+xUo/xd+DYsy448VUQAAAABJRU5ErkJggg==" />.</p>
<pre class="hljs"><code><div><span class="hljs-built_in">printf</span>(<span class="hljs-string">"Hello"</span>),
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"World"</span>),
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Vijay"</span>);
</div></code></pre>
<h3 id="the-setjmp-and-longjmp-functions">The <code>setjmp()</code> and <code>longjmp()</code> functions</h3>
<p>They are functions which lets you advanced controll flow in C.
Mainly used to implement exception handling in C.
As a C++ alternative <code>setjmp()</code> can be said as <code>try</code> and  <code>longjmp()</code> can be said as <code>throw</code>.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">function1</span><span class="hljs-params">()</span></span>{
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">function2</span><span class="hljs-params">()</span></span>{
        <span class="hljs-comment">// Say here an error</span>
    }
}
</div></code></pre>
<p>returning the values one by one will be a tedious task and we can't use a global variable for errors. So in this situation we can use <code>setjmp()</code> and <code>longjmp()</code>.</p>
<p>They are basically similiar to <code>goto</code> but one of the disadvantage of goto is it can only jump to labels in same function. Here we can jump into any function or even a different file.</p>
<h3 id="how-it-works">How it works</h3>
<ul>
<li><code>setjmp()</code> saves a copy of program counter and the current stack top pointer.</li>
<li>
<pre class="hljs"><code><div>  <span class="hljs-keyword">int</span> i = setjmp(jmp_buf buf)

</div></code></pre>
Use the variable <code>buf</code> to remember where we are now.</li>
<li>Now wherever we call <code>longjmp()</code> with a value it will return that value to the <code>setjmp()</code> varaible and continue executing there.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;setjmp.h&gt; // This must be added</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

jmp_buf buf;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> i = setjmp(buf); <span class="hljs-comment">// This creates a process and saves it</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"i = %d\n"</span>,i);

    <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// This will run if it longjumped.</span>
    }
    

    longjmp(buf,<span class="hljs-number">42</span>); <span class="hljs-comment">// This returns the value 42 to the saved process and continue from there.</span>

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This will not print."</span>); <span class="hljs-comment">// This will not print</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>This can be also done from functions:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;setjmp.h&gt; // This must be added</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

jmp_buf buf;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">myFunction</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"At myFunction\n"</span>);

    longjmp(buf,<span class="hljs-number">40</span>); <span class="hljs-comment">// This jumps to the main function to the saved process and returns 40.</span>

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This will not be printed"</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> i = setjmp(buf); <span class="hljs-comment">// This creates a process and saves it</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"i = %d\n"</span>,i);

    <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>)
    {
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// This will run if it longjumped.</span>
    }
    
    myFunction();
    

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This will not print."</span>); <span class="hljs-comment">// This will not print</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="use-case">Use case</h3>
<p>We can define error codes and we can handle the errors across the program.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NOT_FOUND 404</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BAD_REQUEST 304</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SERVER_DOWN 504</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;setjmp.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

jmp_buf errbuf;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">function1</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// A not found error occures here...</span>
    longjmp(errbuf, NOT_FOUND);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">function2</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// A bad request error occures here...</span>
    longjmp(errbuf, BAD_REQUEST);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">function3</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-comment">// A server error occures here...</span>
    longjmp(errbuf, SERVER_DOWN);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">handleError</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">switch</span> (setjmp(errbuf))
    {
    <span class="hljs-keyword">case</span> NOT_FOUND:
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nThe webpage you looking not found..."</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> BAD_REQUEST:
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nBad request found..."</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> SERVER_DOWN:
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nThe server is down..."</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nUndiscovered error occured..."</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">break</span>;
    }
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{

    handleError();

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Main function executes"</span>);

    function1();
    function2();
    function3();

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="what-you-know">What you know</h3>
<p>What will be the output of the following program? #include &lt;stdio.h&gt; int main() { printf(&quot;%d &quot;, 1); goto l1; printf(&quot;%d &quot;, 2); l1:goto l2; printf(&quot;%d &quot;, 3); l2:printf(&quot;%d &quot;, 4); }</p>
<p>What will be the output of the following program? #include &lt;stdio.h&gt; int main() { printf(&quot;%d &quot;, 5); goto l1; printf(&quot;%d &quot;, 6); } void foo() { l1 : printf(7 &quot;, 7); }</p>
<p>The &quot;null statement&quot; is an expression statement with the expression missing  (T/F)</p>
<p>What is the output of the following program?int x = (249,500); printf(x is %d\n, x);</p>
<p>The below code is an example of using the comma operator (T/F)int a = 1, b = 2;</p>
<p>What is the output of the following program?#include &lt;stdio.h&gt; int main(void) { int i; char ch; for (i = 0, ch = 'A'; i &lt; 4; i++, ch += 2 * i) printf(&quot;%c&quot;, ch); return 0; }</p>
<p>What is the output of the following program?#include &lt;setjmp.h&gt; #include &lt;stdio.h&gt; jmp_buf buf; int main(void) { int i = setjmp(buf); printf(&quot;i = %d\n&quot;, i); longjmp(buf, 42); printf(&quot;Does this line get printed?\n&quot;); return 0; }</p>
<p>The setjmp and longjmp function call is equivalent to the goto statement (T/F)</p>
<h1 id="section-10">Section 10</h1>
<h2 id="input-and-output">Input and Output</h2>
<p>The <code>stdio.h</code> includes all the necessory input and output functions we needed. When we run any C program,<code>stdin</code>,<code>stdout</code>,<code>stderr</code> are automatically executed (defined in <code>stdio.h</code>). They are required by the terminal they run on. Anyway we have to include it (<code>stdio.h</code>) in our program to use it. The don't take any advantages of a specfic system so they are portble to any os.</p>
<h3 id="input-functions">Input functions</h3>
<h4 id="char"><code>char</code></h4>
<p>First let's look at the char functions.</p>
<h4 id="getc"><code>getc()</code></h4>
<p><code>getc</code> can be used to print from both a file and the <code>stdin</code> (terminal)</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> ch = <span class="hljs-string">'\0'</span>;
    FILE * fp;
    fp = fopen(<span class="hljs-string">"hello.txt"</span>,<span class="hljs-string">"rw"</span>);
    <span class="hljs-keyword">while</span> (ch != EOF)
    {
        ch = getc(fp);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%c"</span>,ch);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
} <span class="hljs-comment">// This will print the file out</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> ch = <span class="hljs-string">' '</span>;
    <span class="hljs-keyword">int</span> firstTime = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)
    {
        ch = getc(<span class="hljs-built_in">stdin</span>);
        <span class="hljs-keyword">if</span> (firstTime == <span class="hljs-number">1</span>)
        {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"You said : "</span>);
            firstTime = <span class="hljs-number">0</span>;
        }
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%c"</span>, ch);
        <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">'\n'</span>)
        {
            firstTime = <span class="hljs-number">1</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
<span class="hljs-comment">// This will repeat what you give in stdin.</span>
</div></code></pre>
<h4 id="fgetc"><code>fgetc()</code></h4>
<p>Similiar to the <code>getc</code> we can use <code>fgetc</code></p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FILENAME <span class="hljs-meta-string">"hello.txt"</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    FILE * fp = <span class="hljs-literal">NULL</span>;
    fp = fopen(FILENAME,<span class="hljs-string">"rw"</span>);
    <span class="hljs-keyword">if</span> (fp == <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Opening %s failed..."</span>,FILENAME);\
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"File %s Opened....\n\n"</span>,FILENAME);

    }
    
    <span class="hljs-keyword">char</span> ch = <span class="hljs-string">' '</span>;
    <span class="hljs-keyword">while</span> (ch = fgetc(fp),ch != EOF)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%c"</span>, ch);
    }
    fclose(fp);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n\nFile %s Closed....\n"</span>,FILENAME);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

</div></code></pre>
<h4 id="ungetc"><code>ungetc()</code></h4>
<p>If we have to skip a charecter we can use ungetc.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> ch = <span class="hljs-string">' '</span>;
    <span class="hljs-keyword">while</span> ((ch = (<span class="hljs-keyword">char</span>)getc(<span class="hljs-built_in">stdin</span>)) == <span class="hljs-string">' '</span>  )
    {
        ungetc(ch,<span class="hljs-built_in">stdin</span>); <span class="hljs-comment">// skips and gives the next charecter to ch.</span>
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Char is : %c"</span>,ch);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="output-functions">Output Functions</h3>
<h4 id="putc"><code>putc()</code></h4>
<p>Puts a single charecter into a file or stdout if it is provided with stream.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> name[] = <span class="hljs-string">"Vijay"</span>;
    FILE * fp = fopen(<span class="hljs-string">"hello.txt"</span>,<span class="hljs-string">"w"</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">sizeof</span>(name) - <span class="hljs-number">1</span>; i++)
    {
        putc(name[i],fp);
    }
    fclose(fp);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Using stdout:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> name[] = <span class="hljs-string">"Vijay"</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">sizeof</span>(name) - <span class="hljs-number">1</span>; i++)
    {
        putc(name[i],<span class="hljs-built_in">stdout</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="fputc"><code>fputc()</code></h4>
<p><code>fputc()</code> is exclusively for files.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    FILE * fp = fopen(<span class="hljs-string">"hello.txt"</span> , <span class="hljs-string">"w"</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span> i = <span class="hljs-string">'A'</span>; i &lt;= <span class="hljs-string">'Z'</span>; i++)
    {
        fputc(i,fp);
    }
    fclose(fp);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="string-functions">String Functions</h3>
<h4 id="gets"><code>gets()</code></h4>
<p>Reads a line from <code>stdio</code>. Reads until the <em>EOF</em> or <code>'\n'</code> is found.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">char</span> * <span class="hljs-title">gets</span><span class="hljs-params">(<span class="hljs-keyword">char</span> * str)</span></span>;
</div></code></pre>
<p><strong>DO NOT USE</strong></p>
<p><strong>DEPRICATED</strong></p>
<p><strong>STAY THE F*CK OUT</strong></p>
<p>Problems:</p>
<ul>
<li>No check for buffer overflow is permitted</li>
<li>It is impossible to tell without knowing advance how much data will <code>gets()</code> read.</li>
</ul>
<h4 id="fgets"><code>fgets()</code></h4>
<p>Reading entire line of data from file/stream. Have similiar behavior to <code>gets</code>. Accept two additional arguments.</p>
<ul>
<li>The number of charecters to read.</li>
<li>An input stream</li>
</ul>
<p>We can specify a maximum buffer and it will read untill a newline charecter occures or the maximum of buffer reached.
Not Recommended for performace reasons.</p>
<p><em><strong>DEPRICATED</strong></em></p>
<p>Problems:</p>
<ul>
<li>A null charecter is not specified.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAXLEN 30</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> str[MAXLEN];
    fgets(str,MAXLEN,<span class="hljs-built_in">stdin</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>,str);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="getline"><code>getline()</code></h4>
<p><code>getline()</code> is the latest function for reading string from stream.</p>
<ul>
<li>Have to pass a double pointer allocated by <code>malloc</code> or <code>calloc</code>.</li>
<li>Automatically calls <code>realloc</code> when needed so no memory shortage.</li>
<li>Have to pass the pointer to the <code>size_t</code> type variable which holds the size of first parameter.</li>
<li>Third is an input stream.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">ssize_t</span> <span class="hljs-title">getline</span><span class="hljs-params">(<span class="hljs-keyword">char</span> ** <span class="hljs-built_in">buffer</span>,<span class="hljs-keyword">ssize_t</span> * <span class="hljs-built_in">size</span>,FILE * stream)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> * <span class="hljs-built_in">buffer</span> = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">char</span> <span class="hljs-built_in">buffer</span>[<span class="hljs-number">32</span>];
    <span class="hljs-keyword">size_t</span> bufsize = <span class="hljs-number">32</span>;
    <span class="hljs-keyword">size_t</span> charecters;

    <span class="hljs-built_in">buffer</span> = (<span class="hljs-keyword">char</span> *) <span class="hljs-built_in">malloc</span>(bufsize * <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">char</span>));

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">buffer</span> == <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Type Something: "</span>);
    charecters = getline(&amp;<span class="hljs-built_in">buffer</span>,&amp;bufsize,<span class="hljs-built_in">stdin</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"You typed: %s\nNumber of charecters read: %zu \n"</span>,<span class="hljs-built_in">buffer</span>,charecters - <span class="hljs-number">1</span>);
    

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="puts"><code>puts()</code></h4>
<p>Puts method can be used to display a string to the stdout and it automatically adds a newline charecter to the end of the string.</p>
<p>It is much more safe and simple but it cannot do any formatting as of the <code>printf</code>. So if you need to rely on variables stay away from <code>puts</code>.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">puts</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>)</span></span>;
</div></code></pre>
<p>It also have a sibling function called fputs. It simply write the string to the stream provided.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">fputs</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>,FILE * fptr)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">30</span>] = <span class="hljs-string">"Hello Vijay..."</span>;

    FILE * fp = fopen(<span class="hljs-string">"output.txt"</span>,<span class="hljs-string">"w"</span>);
    <span class="hljs-built_in">puts</span>(<span class="hljs-built_in">string</span>);
    <span class="hljs-keyword">if</span> (fp !=  <span class="hljs-literal">NULL</span>)
    {
        <span class="hljs-built_in">fputs</span>(<span class="hljs-built_in">string</span>,fp);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="formating-functions">Formating Functions</h3>
<h4 id="sprintf"><code>sprintf()</code></h4>
<p>Outputs formated string to another string.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sprintf</span><span class="hljs-params">(<span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>,<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * format, ... )</span></span>;
</div></code></pre>
<ul>
<li>Returns the number of charecters stored inside the string.</li>
<li>Unsafe because it won't check the destination's size before saving the string.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">100</span>];
    <span class="hljs-built_in">sprintf</span>(<span class="hljs-built_in">string</span>,<span class="hljs-string">"\n   \033[4mNAME CARD\033[0m\n\n Name: %s\n Age: %s\n\n"</span>,argv[<span class="hljs-number">1</span>],argv[<span class="hljs-number">2</span>]);
    <span class="hljs-built_in">puts</span>(<span class="hljs-built_in">string</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="fscanf-and-fprintf"><code>fscanf()</code> and <code>fprintf()</code></h4>
<p>Does the same as scanf and printf but for a stream. Nothing more.</p>
<h4 id="sscanf"><code>sscanf()</code></h4>
<p>scan data from a formatted string unlike <code>stdin</code>.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sscanf</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * str, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * input,...)</span></span>;
</div></code></pre>
<h4 id="fflush"><code>fflush()</code></h4>
<p>It is used to clean a buffer or file.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">fflush</span><span class="hljs-params">(FILE * fp)</span></span>;
</div></code></pre>
<h3 id="what-you-know">What you know</h3>
<p>What is the output of the following code?#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;ctype.h&gt; int main(int argc, char *argv[]) { int ch; FILE *fp; if (argc &lt; 2) exit(EXIT_FAILURE); if ( (fp = fopen(argv[1], &quot;r&quot;)) == NULL) exit(EXIT_FAILURE); while ( (ch= getc(fp)) != EOF ) if( isdigit(ch) ) putchar(ch); fclose (fp); return 0; }</p>
<p>What is the default return type of getchar()?</p>
<p>What is EOF?</p>
<p>ungetc() is used __________</p>
<p>The gets() function checks for a buffer overflow. (T/F)</p>
<p>The syntax of the fgets function is:char *fgets(char *line, int maxline, FILE *fp)Which of the below statements is true regarding fgets?</p>
<h3 id="what-you-should-review">What you should review</h3>
<p>Is putchar(getchar()) a valid expression; what does it do? Is getchar(putchar()) also valid?</p>
<p>What will be the output of the following code? #include &lt;stdio.h&gt; int main() { int n = 0; scanf(&quot;%d&quot;, &amp;n); ungetc(n, stdin); scanf(&quot;%d&quot;, &amp;n); printf(&quot;%d\n&quot;, n); return 0; }</p>
<p>The fputs()function adds a newline character to the end of the string that is written. (T/F)</p>
<p>What is the difference between each statement below?printf(&quot;Hello, %s\n&quot;, name); fprintf(stdout, &quot;Hello, %s\n&quot;, name); fprintf(stderr, &quot;Hello, %s\n&quot;, name);</p>
<h1 id="section-11">Section 11</h1>
<h2 id="advanced-function-concepts">Advanced Function concepts</h2>
<h3 id="variadic-functions">Variadic Functions</h3>
<p>Variadic functioms are functions which can have variable number of arguments.<code>printf()</code> is an example for that. Has two parts:</p>
<ul>
<li>Mandatory arguments
<ul>
<li>Need atleast one and it should be first</li>
<li>Order is important</li>
</ul>
</li>
<li>Optional arguments
<ul>
<li>Listed after mandatory arguments</li>
</ul>
</li>
</ul>
<p>The standard library <code>stdarg.h</code> provides the macro for writing our own varadic functions. Common practice is to pass the number of arguments as the first argument.</p>
<p><strong>Steps to create a variadic function</strong></p>
<ul>
<li>Provide a function prototype using an ellipse (three dots).
<ul>
<li>Ellipse indicates there will be variables</li>
<li>Atleast need one fixed argument</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addNumbers</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b,...)</span></span>;
</div></code></pre>
</li>
<li>Create a <code>va_list</code> type variable ( It is basically a list of arguments )</li>
<li>Copy the arguments list to that variable  using <code>va_start</code>
<ul>
<li>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addNumbers</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b,...)</span></span>{
    va_list <span class="hljs-built_in">list</span>;
    va_start(<span class="hljs-built_in">list</span>,b);

    <span class="hljs-keyword">int</span> c = va_arg(<span class="hljs-built_in">list</span>,<span class="hljs-keyword">int</span>);
    <span class="hljs-keyword">int</span> d = va_arg(<span class="hljs-built_in">list</span>,<span class="hljs-keyword">int</span>);
    va_end(<span class="hljs-built_in">list</span>);
}
</div></code></pre>
</li>
</ul>
</li>
<li>Then use the <code>va_arg()</code> to retrieve the variable.</li>
<li>Using multiple times will retrive the variable next.</li>
<li>Reset the <code>va_list</code> variable for starting from first optional variable again</li>
</ul>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdarg.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addNumbers</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, ...)</span>
</span>{
    va_list <span class="hljs-built_in">list</span>;
    va_start(<span class="hljs-built_in">list</span>, n);
    <span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)
    {
        sum += va_arg(<span class="hljs-built_in">list</span>, <span class="hljs-keyword">int</span>);
    }
    va_end(<span class="hljs-built_in">list</span>);
    <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, addNumbers(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="vacopy"><code>va_copy()</code></h4>
<p>once an argument is retrieved it cannot be retreived again. So it is good to keep a copy of that for future uses. We can make a copy of the original va_list for future uses. We should do the copying before doing anything ( atfer <code>va_start</code> ) to the list.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addNumbers</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, ...)</span>
</span>{
    va_list <span class="hljs-built_in">list</span>;
    va_list copiedList;

    va_start(<span class="hljs-built_in">list</span>, n);
    va_copy(copiedList,<span class="hljs-built_in">list</span>);

    <span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)
    {
        sum += va_arg(<span class="hljs-built_in">list</span>, <span class="hljs-keyword">int</span>);
    }
    va_end(<span class="hljs-built_in">list</span>);
    <span class="hljs-keyword">return</span> sum;
}
</div></code></pre>
<h3 id="recursion">Recursion</h3>
<p>For some types of programs, it is usefull to have a function call itself. Can be usefull when we have to do operations repeatedly. Ofcurse we can use loops. Only advantage of recursion is less code.</p>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">fact</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span></span>{
    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>)
    {
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">return</span> n * fact(n<span class="hljs-number">-1</span>);
    
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,fact(<span class="hljs-number">5</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>The value of the argument must converge or else this will create an infinite loop.</p>
<p>Each time we call a function it puts the instance into a stack and when the last functions returns a value the stack is removed one by one.</p>
<h3 id="inline-functions">Inline functions</h3>
<p>When running a function it take execution time to setup the call,pass arguents,jump to function code etc. So C99 introduced a feature called inline functions to avoid this overhead.</p>
<p>Inline declaration is a hint to the compiler that function is worth running fast. Compiler will avoid calling the function and replace it with inline code.
It is just a suggestion not a guarantee to make it fast. It can make the code more lengthy and large program file size. Use it for short functions.</p>
<p>To declare an inline function just give the <code>inline</code> keyword in the function declaration and the compiler will make the calling of this function inline.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addNumbers</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b)</span></span>{
    <span class="hljs-keyword">return</span> a+b;
} <span class="hljs-comment">// This function can be in another file.</span>

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addNumbers</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>,addNumbers(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="noreturn-functions"><code>_Noreturn</code> functions</h3>
<p>This function type specifier is added in C11. This specifier tells the compiler to not to return the control from the function after it excecuted. Helps to prevent missusing of the function. This is just a hint to the compiler not a guarantee.</p>
<p>The <code>exit()</code> function is an example for _Noreturn function. After it called the control will not be given back.</p>
<p>You should not return anything explicitly from the function.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdnoreturn.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function">noreturn <span class="hljs-keyword">void</span> <span class="hljs-title">exitfrom</span><span class="hljs-params">(<span class="hljs-keyword">char</span> * <span class="hljs-built_in">process</span>,<span class="hljs-keyword">int</span> code)</span></span>;
 
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">exitfrom</span><span class="hljs-params">(<span class="hljs-keyword">char</span> * <span class="hljs-built_in">process</span>,<span class="hljs-keyword">int</span> code)</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Exitting from %s..."</span>,<span class="hljs-built_in">process</span>);
    <span class="hljs-built_in">exit</span>(code);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    exitfrom(<span class="hljs-string">"Download"</span>,<span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="what-you-know">What you know</h3>
<p>What will be the output of the following code? #include &lt;stdio.h&gt; #include &lt;stdarg.h&gt; void func(int, ...); int main() { func(2, 3, 5, 7, 10, 13); return 0; } void func(int n, ...) { int number, i = 0; va_list start; va_start(start, n); while (i != 4) { number = va_arg(start, int); i++; } printf(&quot;%d&quot;, number); }</p>
<p>Which of the following variadic functions with an ellipsis are illegal?</p>
<p>Which header file includes a macro for variable number of arguments?</p>
<p>Which of the following macros extracts an argument from the variable argument list and advances the pointer to the next argument?</p>
<p>The type va_list in an argument list is used ________</p>
<p>What is the purpose of va_end?</p>
<p>What will be the output of the following code?int main() { int n; n=f1(5); printf(&quot;%d&quot;,n); } f1(int x) { int b; if(x==1) return 1; else b=x*f1(x-1); return b; }</p>
<p>Iteration requires more system memory than recursion (T/F)</p>
<p>A function whose definition can be substituted at a place where its function call is made is known as.</p>
<p>What will be the error (if any) in the following code?void static inline func1(float b) { printf (&quot;%lf\n&quot;,b*2); } int main() { inline func1(2.2); return 0; }</p>
<p>The _NoReturn function specifier was added in C11. (T/F)</p>
<p>Which header file includes the convenience macro noreturn?</p>
<p>The purpose of the _Noreturn specifier is to inform the compiler that a particular function will not return control to the calling program when it completes execution.  The compiler will then use this information to always optimize your code.  (T/F)</p>
<h3 id="what-you-should-review">What you should review</h3>
<p>In the absence of an exit condition in a recursive function, the following error occurs.</p>
<h1 id="section-12">Section 12</h1>
<h2 id="unions">Unions</h2>
<p>Union is a derrived type (like struct) with members that store same storage space. Sometimes same type of construct need different type of data.</p>
<ul>
<li>Can be used to save space and for alternating data.</li>
<li>A union doesn't waste storage on variables that are not being used.</li>
</ul>
<p>Each element in a union is called a member similiar to struct. Only one member can have a value at a given time. So only one member can be accessed at a time.</p>
<p>The members of union can be any type. In most cases union will contain two or more datatypes. It is our responsiblity to ensure that the data is referenced with proper datatype.</p>
<p>Operations on a union are:</p>
<ul>
<li>Assigning of a union to another with the same type.</li>
<li>taking the address (&amp;) of a union varable.</li>
<li>Accessing union members.</li>
</ul>
<h3 id="use-cases">Use cases</h3>
<ul>
<li>Usefull in embeded programming with a low memory requierment because unions save memory.</li>
<li>For representing a table with mixed dayatypes.</li>
<li>Creating muli datatype arrays.</li>
<li>Representing files with different record types.</li>
<li>Representing a network interface containing different requests.</li>
</ul>
<table>
<thead>
<tr>
<th>Struct</th>
<th>Union</th>
</tr>
</thead>
<tbody>
<tr>
<td>Allocates space for all it's members seperately</td>
<td>one common memory space for all members</td>
</tr>
<tr>
<td>Memory space calculated for each member</td>
<td>Memory space calculated for the largest member. Programmers can decide what to put there</td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">mystruct</span>{</span>
    <span class="hljs-keyword">char</span> a;
    <span class="hljs-keyword">float</span> b;
}mystruct;
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-keyword">union</span> myunion{
    <span class="hljs-keyword">char</span> a;
    <span class="hljs-keyword">float</span> b;
}mystruct;
</div></code></pre>
<h3 id="defining-a-union">Defining a union</h3>
<p>Defenition is similiar to the struct. use the <code>union</code> keyword instead.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">union</span> data{
    <span class="hljs-keyword">int</span> a;
    <span class="hljs-keyword">float</span> b;
    <span class="hljs-keyword">char</span> c[<span class="hljs-number">20</span>];
}
</div></code></pre>
<p>This will take 20 bytes of memory because of <code>c</code> is the highest datatype. Structures can be defined containing unions.</p>
<p>Unions can also be defined as arrays and can store as much as union elements we want in an array.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-keyword">union</span> Data
{
    <span class="hljs-keyword">int</span> a;
    <span class="hljs-keyword">float</span> b;
    <span class="hljs-keyword">char</span> c[<span class="hljs-number">20</span>];
};
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span>
{</span>
    <span class="hljs-keyword">char</span> name[<span class="hljs-number">30</span>];
    <span class="hljs-keyword">int</span> age;
    <span class="hljs-keyword">union</span> Data data;
    <span class="hljs-keyword">union</span>
    {
        <span class="hljs-keyword">int</span> isDead;
        <span class="hljs-keyword">char</span> occupation[<span class="hljs-number">20</span>];
    };
};

<span class="hljs-class"><span class="hljs-keyword">struct</span>
{</span>
    <span class="hljs-keyword">char</span> *name;
    <span class="hljs-keyword">enum</span> symbolType;
    <span class="hljs-keyword">union</span>
    {
        <span class="hljs-keyword">int</span> i;
        <span class="hljs-keyword">float</span> f;
        <span class="hljs-keyword">char</span> c;
    } data;
} table[<span class="hljs-number">10</span>];

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">union</span> Data data1, data2, *data3;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span> <span class="hljs-title">p1</span>;</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld\n"</span>, <span class="hljs-keyword">sizeof</span>(data1)); <span class="hljs-comment">// OUT: 20</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%ld\n"</span>, <span class="hljs-keyword">sizeof</span>(p1));    <span class="hljs-comment">// OUT: 20</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="accessing-union-members">Accessing union members.</h3>
<p>Accessing and assigning is also similiar to the struct.</p>
<ul>
<li>dot (.) operator to access the members.</li>
<li><code>-&gt;</code> operator to access the pointer type variables.</li>
</ul>
<p>Eg: <code>name.member</code></p>
<h3 id="what-you-know">What you know</h3>
<p>A union will allocate storage space for all its members separately (T/F)</p>
<p>Which of the following share a similarity in syntax to a Union?1. Object, 2. Structure, 3. Arrays, 4. Pointers</p>
<p>What will be the output of the following code?union myUnion { int ival; float fval; }; void main() { union myUnion r; r.fval = 5.2; printf(&quot;%f&quot;, r.fval); }</p>
<p>The size of a union is determined by the size of the __________</p>
<p>What would be the size of the following union declaration?(Assuming size of double = 8, size of int = 4, size of char = 1)?union uTemp { double a; int b[10]; char c; } u;</p>
<p>Members of a union are accessed as________________</p>
<p>What will be the output of the following code?union p { int x; char y; }; int main() { union p a, b; a.y = 60; b.x = 12; printf(&quot;%d\n&quot;, a.y); }</p>
<h3 id="what-you-should-review">What you should review</h3>
<p>How can you access the first character of the string sval?struct { char *name; union { char *sval; } u; } tab[10];</p>
<h1 id="section-13">Section 13</h1>
<h2 id="preprocessors">Preprocessors</h2>
<p>The process of creating a c program involves:</p>
<ul>
<li>Preprocessing</li>
<li>Compilation</li>
<li>Assembling</li>
<li>linking</li>
<li>loading</li>
</ul>
<p>The preprocessor is evoked before the compiling. It is basically a text substitution tool.
Preprocessor will do three steps</p>
<ol>
<li>Removes all comments: It is just for engineers understanding not needed for the execution.</li>
<li>Includes all the files from various libraries that is needed to compile. We have to specify them using the <code>#include</code> directive.</li>
<li>Expansion of macro defenitions.</li>
</ol>
<p>Commands used by preprocesors are called preprocessor directives. It should be the first nonblank charecter and should begin in the first column</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAXLENGTH 10</span>
</div></code></pre>
<h3 id="conditional-compilation">Conditional Compilation</h3>
<p>Often used to compile a single program according to the host machine. Usefull when we have a larger software with more dependancies. Can also be used to switch certain statements like debugging on or off.</p>
<p>Each if the conditional preprocessor directives checks a constat integer expression;</p>
<h4 id="ifdef"><code>#ifdef</code></h4>
<p>Checks whether the identifier is defined or not. To set an identifier:</p>
<p><code>#define UNIX 1</code> or <code>#define UNIX</code></p>
<p>Or we can also use commandline arguments to define an identifier</p>
<pre class="hljs"><code><div>gcc hello.c -D UNIX
</div></code></pre>
<p>The <code>#ifdef</code> can be used as :</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> UNIX</span>
<span class="hljs-comment">// Code specific for UNIX</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
</div></code></pre>
<p>The <code>#ifndef</code> is just an opposite of <code>#ifdef</code>.
We can also use <code>#else</code> and <code>#elif</code> directives.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> WINDOWS</span>
<span class="hljs-comment">// Code specific for windows</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">elif</span> MAC</span>
<span class="hljs-comment">// Code specific for macos</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
<span class="hljs-comment">// Code Specific for other platforms</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LIMIT 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)
    {
        ;
        <span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> DEBUG</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%dth loop runned\n"</span>,i+<span class="hljs-number">1</span>);
        <span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Loop Finished...\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Output:</p>
<pre class="hljs"><code><div>vijaysatheesh@Vijays-MacBook-Air Section 13 % gcc conditcompile.c
vijaysatheesh@Vijays-MacBook-Air Section 13 % ./a.out 
Loop Finished...
vijaysatheesh@Vijays-MacBook-Air Section 13 % gcc conditcompile.c -D DEBUG
vijaysatheesh@Vijays-MacBook-Air Section 13 % ./a.out                     
1th loop runned
2th loop runned
3th loop runned
4th loop runned
5th loop runned
6th loop runned
7th loop runned
8th loop runned
9th loop runned
10th loop runned
Loop Finished...
</div></code></pre>
<h4 id="include-guards-and-undef">Include guards and <code>#undef</code></h4>
<p>The <code>#ifndef</code> is commonly used to prevent multiple inclussions.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> _STDIO_H</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> _STDIO_H</span>
<span class="hljs-comment">// include statements </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
</div></code></pre>
<p>Now we cannot include the same headerfile again.</p>
<h4 id="undef"><code>#undef</code></h4>
<p>This preprocessor directive is used to undefine a previously defined identifier.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SPEED</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> WINDOWS</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">undef</span> SPEED <span class="hljs-comment">// JK :-P</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
</div></code></pre>
<h3 id="pragma"><code>#pragma</code></h3>
<p>The <code>#pragma</code> direcive allows us to place compiler instructions in sourcecode. Usefull when the program is large and we have to use the most capablities of the compiler.
It can be used to:</p>
<ul>
<li>Control the memory kept for automatic variables</li>
<li>Set the strictness of error checking</li>
<li>Enable nonstandard language features</li>
</ul>
<p>Generally each compiler have their own pragmas.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> token_name</span>
</div></code></pre>
<p>We have to look at the compiler documentation for available pragmas. Some example for GCC are:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC dependancy</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC poison</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC system_header</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC <span class="hljs-meta-keyword">warning</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC <span class="hljs-meta-keyword">error</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> message</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC dependancy <span class="hljs-meta-string">"hello.c"</span></span>
<span class="hljs-comment">// Warning issued if the hello.c file is recent than the current compiling file.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC poison puts gets</span>
<span class="hljs-comment">// Removes an identifier completely from the program. Error will be displayed if appears.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC system_header </span>
<span class="hljs-comment">// Considers the rest of the header files as system headers and GCC avoids warning of system headers.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC once</span>
<span class="hljs-comment">// Ensures the include specifed included only once even if it included multiple times by the programmer. Less portable version of include guards.</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC message <span class="hljs-meta-string">"This will be printed"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC <span class="hljs-meta-keyword">warning</span> <span class="hljs-meta-string">"I will kill you"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> GCC <span class="hljs-meta-keyword">error</span> <span class="hljs-meta-string">"Just kidding no error"</span></span>
<span class="hljs-comment">// Generates custom warnings errors and compiler messages. </span>
</div></code></pre>
<h3 id="error"><code>#error</code></h3>
<p>Issues an error by the preprocessor. Portable because it is independent of the compiler. Even vscode shows warning</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">error</span> You Are Done Go To Hell</span>
</div></code></pre>
<p>Also we can use :</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">warning</span> Behave yourself</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">line</span> 69 yourlife.c</span>
</div></code></pre>
<h3 id="what-you-know">What you know</h3>
<p>The C preprocessor is the first step of the compiliation process</p>
<p>The C preprocessor may have compiler specific features</p>
<p>Every preprocessor directive must begin with a  __________.</p>
<p>Only __________ characters may appear before a preprocessor directive on a line.</p>
<p>__________ allows a programmer to produce different executables (code) for different platforms.</p>
<p>Which of the following are C preprocessors directives that allow for Conditional Compiliation?</p>
<p>This preprocessor directive is used to remove the definition of an identifier which was previously defined with #define?</p>
<p>Write some code that will print out your name if the  identifier MY_NAME is defined</p>
<p>The __________ and __________ directives allow a program to extend the #if and #ifdef/#ifndef directives to test for multiple cases</p>
<p>What will be the output of the following C program?#include &lt;stdio.h&gt; #define SWAP int main() { int x = 3, y = 5; #ifdef SWAP x = 5; y = 3; #endif printf(&quot;%d, %d&quot;, x, y); }</p>
<p>What will be the output of the following program?#include&lt;stdio.h&gt; #define TEXT void main() { #ifndef TEXT printf(&quot;hello&quot;); #else printf(&quot;hi&quot;); #endif }</p>
<p>This preprocessor directive is used to give additional information to the compiler, beyond which is provided in the language</p>
<p>This pragma is used to remove an identifier completely from a program.</p>
<p>The purpose of using the preprocessor directive #error is that ____________</p>
<h3 id="what-you-should-review">What you should review</h3>
<p>What is a preprocessor?</p>
<p>This preprocessor directive checks whether a constant expression results in a zero or non-zero value.</p>
<h1 id="section-14">Section 14</h1>
<h2 id="macros">Macros</h2>
<p>Macro is a code piece based of the #define statement. Macros are a text processing feature and are expanded and replced by macro defenitions. Little outdated nowadays but still makes programmers day better.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MACRO macro_body</span>
</div></code></pre>
<p>It simply replaces the occurance of <code>MACRO</code> with <code>macro_body</code>.
Eg:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PRINT_HI printf(<span class="hljs-meta-string">"Hi..."</span>);</span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    PRINT_HI
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Some things to remember:</p>
<ul>
<li>There can't be space in macro name but can have space in macro body.</li>
<li>Macros are not terminated by semicolon.</li>
<li>They run until the first newline following the <code>#</code></li>
<li>Limited to one line in length but can use <code>\</code> operator for continuation.</li>
</ul>
<table>
<thead>
<tr>
<th>Macros</th>
<th>Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td>All macros are preprocessed means all will be processed before the program compiles.</td>
<td>Functions are compiled not preprocessed.</td>
</tr>
<tr>
<td>Macro is faster because it is executed as inline code.</td>
<td>Function is slower because the program control must shift to where the function defined.</td>
</tr>
<tr>
<td>Macros dont have to allocate a seperate data or stackframe it is just a text substitution.</td>
<td>Function have to make room for arguments and other variables.</td>
</tr>
<tr>
<td>A macro produces inline code so the filesize of the program increases.</td>
<td>Function only defined once so no such overhead.</td>
</tr>
<tr>
<td>Macros don't have to worry about variable types. Just substitute the values</td>
<td>Have to deal with variable types</td>
</tr>
<tr>
<td>Same macro can be used with any datatype and it won't give errors of type checking</td>
<td>Functions do type checking</td>
</tr>
</tbody>
</table>
<p>Some compiler will limit the macros to single line. So we have to observe that even if our compiler doesn't. Inline functions are an alternative to macro but it have it's own place.</p>
<p>We can see the preprocessed code by the command:</p>
<pre class="hljs"><code><div>gcc -E file.c
</div></code></pre>
<h3 id="preprocessor-operators">Preprocessor Operators</h3>
<p>The preprocessor includes some operators for making the macros easy. They are :</p>
<ul>
<li><code>\</code> operator : This will allow the continuation of a macro to the next line. A macro is always a single logic line so <code>\</code> will be usefull.</li>
<li><code>defined()</code> operator is used when we have to know whether an identifier is defined using <code>#define</code> or not.</li>
<li><code>#</code> and <code>##</code> operators are used to merge two tokens into one while expanding macros.</li>
<li><code>#</code> operator causes the replacement text to be substituted as a string surrounded by quotes.</li>
<li><code>##</code> operator is used to join two tokens together.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> TOKENCONCAT(a,b) a ## b</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"TOKENCONCAT(O,K)"</span>);
}
</div></code></pre>
<h3 id="predefined-macros">Predefined Macros</h3>
<p>C provide some symbolic constants as macros.</p>
<ul>
<li><code>__FILE__</code> gives the current filename working with.</li>
<li><code>__LINE__</code> gives the current line.</li>
<li><code>__func__</code> gives the current function name (not standard).</li>
<li><code>__DATE__</code> gives the compiled date in MMM DD YYYY format.</li>
<li><code>__TIME__</code> gives the compiled time in hh:mm:ss format.</li>
<li><code>__STDC__</code> will return the value 1 if compiler support standard C.</li>
</ul>
<p>These macros cannot be placed inside a preprocessor directive.It should begin and end with the two underscores.</p>
<h1 id="section-15">Section 15</h1>
<h2 id="advanced-debugginganalysys-and-compiler-options">Advanced debugging,analysys and compiler options</h2>
<h3 id="gcc-compiler-options">GCC compiler options</h3>
<p>There are various compiler options to control the execution process of a c program.
For example there are options to stop at a particular process. Some options stop at preprocessing some at compiling and some do liniking and loading.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Option</th>
<th style="text-align:center">Purpous</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>-c</code></td>
<td style="text-align:center">Do the compiling only and generate an object file.</td>
</tr>
<tr>
<td style="text-align:center"><code>-Wall</code></td>
<td style="text-align:center">Enables all warnings.</td>
</tr>
<tr>
<td style="text-align:center"><code>-E</code></td>
<td style="text-align:center">Dumps the preprocessed code.</td>
</tr>
<tr>
<td style="text-align:center"><code>-S</code></td>
<td style="text-align:center">Generates assembly code.</td>
</tr>
<tr>
<td style="text-align:center"><code>-save-temps</code></td>
<td style="text-align:center">Saves all the files from all steps.</td>
</tr>
<tr>
<td style="text-align:center"><code>-l</code></td>
<td style="text-align:center">For linking shared libraries ( Eg: <code>-l m</code> for math library )</td>
</tr>
<tr>
<td style="text-align:center"><code>-g</code></td>
<td style="text-align:center">For storing debug info in the object file</td>
</tr>
<tr>
<td style="text-align:center"><code>-v</code></td>
<td style="text-align:center">Enable verbous</td>
</tr>
<tr>
<td style="text-align:center"><code>-ansi</code></td>
<td style="text-align:center">Follow the ANSI standard</td>
</tr>
<tr>
<td style="text-align:center"><code>-fsigned-char</code></td>
<td style="text-align:center">Treat charecters as signed</td>
</tr>
<tr>
<td style="text-align:center"><code>-funsigned-char</code></td>
<td style="text-align:center">Treat charecters as unsigned</td>
</tr>
<tr>
<td style="text-align:center"><code>-D</code></td>
<td style="text-align:center">Defining macros</td>
</tr>
<tr>
<td style="text-align:center"><code>-Werror</code></td>
<td style="text-align:center">Convert all warnings to errors</td>
</tr>
</tbody>
</table>
<p>We can also include an optfile containing all the options and use with the @ symbol.</p>
<pre class="hljs"><code><div>gcc hello.c @optfilename
</div></code></pre>
<h3 id="optimization-flags">Optimization flags</h3>
<p>We can find out optimizers for a compiler using help. As in GCC we can give the command to get help:</p>
<pre class="hljs"><code><div>GCC -Q --<span class="hljs-built_in">help</span>=optimizers
</div></code></pre>
<h3 id="debugging-with-the-preprocessor">Debugging with the preprocessor</h3>
<p>We can use the conditional compiling directives to turn on or off debugging statements.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> name[<span class="hljs-number">30</span>];
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>,name);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">strlen</span>(name); i++)
    {
        <span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> DEBUG</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%c -&gt; %c\n"</span>,name[i],name[i] + <span class="hljs-number">1</span>);
        <span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
        name[i] += <span class="hljs-number">1</span>;
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>,name);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>We can also use a macro to do the same.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEBUGME(fmt,...) fprintf(stderr,fmt,__VA_ARGS__)</span>
</div></code></pre>
<p>Now we can also wrap in this a ifdef so that we just have to call the debug statements.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> DEBON</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">warning</span> DEBUGGER IS ON </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEBUGME(fmt,...) fprintf(stderr,fmt,__VA_ARGS__)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DEBUGME(fmt,...)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> name[<span class="hljs-number">30</span>];
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>,name);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">strlen</span>(name); i++)
    {
        DEBUGME(<span class="hljs-string">"%c -&gt; %c\n"</span>,name[i],name[i] + <span class="hljs-number">1</span>);
        name[i] += <span class="hljs-number">1</span>;
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>,name);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="debugging-with-lldb">Debugging with LLDB</h3>
<p>LLDB ( low-level debugger ) is a command line tool used for debugging. It allows us to see inside of a program and what crashes the program. The LLDB alternatives for GDB commands are:</p>
<p>Switching from GDB to LLDB can be straightforward since many commands are quite similar. Here's a list of useful LLDB commands along with their GDB counterparts to help you transition:</p>
<h4 id="basic-commands">Basic Commands</h4>
<table>
<thead>
<tr>
<th>Task</th>
<th>GDB Command</th>
<th>LLDB Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Start debugging</td>
<td><code>gdb ./a.out</code></td>
<td><code>lldb ./a.out</code></td>
</tr>
<tr>
<td>Run the program</td>
<td><code>run</code></td>
<td><code>run</code></td>
</tr>
<tr>
<td>Set a breakpoint by function</td>
<td><code>break my_function</code></td>
<td><code>breakpoint set --name my_function</code></td>
</tr>
<tr>
<td>Set a breakpoint by file/line</td>
<td><code>break file.c:10</code></td>
<td><code>breakpoint set --file file.c --line 10</code></td>
</tr>
<tr>
<td>List breakpoints</td>
<td><code>info breakpoints</code></td>
<td><code>breakpoint list</code></td>
</tr>
<tr>
<td>Delete a breakpoint</td>
<td><code>delete breakpoint 1</code></td>
<td><code>breakpoint delete 1</code></td>
</tr>
<tr>
<td>Continue execution</td>
<td><code>continue</code></td>
<td><code>continue</code></td>
</tr>
<tr>
<td>Step into a function</td>
<td><code>step</code></td>
<td><code>step</code></td>
</tr>
<tr>
<td>Step over a function</td>
<td><code>next</code></td>
<td><code>next</code></td>
</tr>
<tr>
<td>Step out of a function</td>
<td><code>finish</code></td>
<td><code>finish</code></td>
</tr>
<tr>
<td>Print a variable</td>
<td><code>print var</code></td>
<td><code>print var</code></td>
</tr>
<tr>
<td>Print call stack</td>
<td><code>backtrace</code></td>
<td><code>bt</code></td>
</tr>
<tr>
<td>List source code</td>
<td><code>list</code></td>
<td><code>list</code></td>
</tr>
<tr>
<td>Display local variables</td>
<td><code>info locals</code></td>
<td><code>frame variable</code></td>
</tr>
<tr>
<td>Quit debugger</td>
<td><code>quit</code></td>
<td><code>quit</code></td>
</tr>
</tbody>
</table>
<h4 id="advanced-commands">Advanced Commands</h4>
<table>
<thead>
<tr>
<th>Task</th>
<th>GDB Command</th>
<th>LLDB Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Watch a variable</td>
<td><code>watch var</code></td>
<td><code>watchpoint set variable var</code></td>
</tr>
<tr>
<td>Examine memory</td>
<td><code>x</code></td>
<td><code>memory read</code></td>
</tr>
<tr>
<td>Change variable value</td>
<td><code>set var x = 5</code></td>
<td><code>expr x = 5</code></td>
</tr>
<tr>
<td>Conditional breakpoint</td>
<td><code>break if i == 3</code></td>
<td><code>breakpoint set --name my_function --condition &quot;i == 3&quot;</code></td>
</tr>
<tr>
<td>Enable breakpoint</td>
<td><code>enable break 1</code></td>
<td><code>breakpoint enable 1</code></td>
</tr>
<tr>
<td>Disable breakpoint</td>
<td><code>disable break 1</code></td>
<td><code>breakpoint disable 1</code></td>
</tr>
<tr>
<td>Command history</td>
<td><code>show commands</code></td>
<td><code>command history</code></td>
</tr>
<tr>
<td>Attach to a process</td>
<td><code>attach pid 1234</code></td>
<td><code>process attach --pid 1234</code></td>
</tr>
<tr>
<td>Detach from process</td>
<td><code>detach</code></td>
<td><code>process detach</code></td>
</tr>
<tr>
<td>Set environment variable</td>
<td><code>set environment VAR=VAL</code></td>
<td><code>settings set target.env-vars VAR=VAL</code></td>
</tr>
<tr>
<td>Redirect I/O</td>
<td><code>run &lt; input &gt; output</code></td>
<td><code>run &lt; input &gt; output</code></td>
</tr>
<tr>
<td>Call a function</td>
<td><code>call func()</code></td>
<td><code>expr func()</code></td>
</tr>
</tbody>
</table>
<p>First we have to enable the debugging information in our code. Use the -g flag for that.</p>
<pre class="hljs"><code><div>gcc -g filename.c
</div></code></pre>
<p>Next we can look into the executable using GDB</p>
<pre class="hljs"><code><div>lldb a.out
</div></code></pre>
<p>This will open up a gdb prompt like this:</p>
<pre class="hljs"><code><div>(lldb) target create <span class="hljs-string">"a.out"</span>
Current executable <span class="hljs-built_in">set</span> to <span class="hljs-string">'/Users/vijaysatheesh/Advanced C Programming/Section 15/a.out'</span> (arm64).
(lldb) 
</div></code></pre>
<p>For running the code under the control of lldb, Use command:</p>
<pre class="hljs"><code><div>(lldb) run
</div></code></pre>
<p>This will execute the program normally and it will throw errors if it have. If you want to know the value of a variable at the time of crash, use the command:</p>
<pre class="hljs"><code><div><span class="hljs-built_in">print</span> &lt;variable_name&gt;
</div></code></pre>
<p>This will also work on arrays and structures.
In order to set a variable, We can use the command:</p>
<pre class="hljs"><code><div>expr &lt;variable_name&gt; = &lt;value&gt;
</div></code></pre>
<p>The variable must be in current active function and the process must be running in order to work with variables. To display all the variables just use:</p>
<pre class="hljs"><code><div>frame variables
</div></code></pre>
<h3 id="core-files">Core files</h3>
<p>A core dump is generated when a program is crashed or terminated abnormally because of segmentation fault.
A Segmentation fault is a specific kind of error caused by accessing memory that &quot;do not belongs you&quot;. The core file contains the snapshot of the memory at the time of termination. Can be used to analyse the crash and compare to another crashes offsite.</p>
<p>Because of large size the compiler may disable the core dumping. You can enable it by running:</p>
<pre class="hljs"><code><div><span class="hljs-built_in">ulimit</span> -c unlimited
</div></code></pre>
<h3 id="profiling">Profiling</h3>
<p>Profiling is a form of dynamic programming analysis that measures the:</p>
<ul>
<li>Space complexity</li>
<li>Time Complexity</li>
<li>Usage of particular instructions</li>
<li>The frequency and duration of function calls</li>
</ul>
<p>This serves data to optimize the program. Achieved by instrumenting the source code by some profiling tools. Profilers will use various techniques like event based,statistical,instrumented,and simulated methods.</p>
<h4 id="gprof">gprof</h4>
<p>gprof (GNU Profiler) is a tool used to profile the executable.It uses a hybrid approach of compiler assisted instrumentation and sampling. The instrumentation is used to gather function call insformation ( call graphs ).</p>
<p>To gather runtime info a sampling process is used.
The program counter is inturrupted at regular intervals of time. The resultant data is not exact but are statistical approximations.</p>
<p>use <code>gcc -pg profiling.c</code> to enable analysis and use <code>gprof a.out gmon.out</code> to get the call graph and analysys report.</p>
<h4 id="valgrind">valgrind</h4>
<p>valgrind is another program to check memory leaks. It is a really slow program but detects the memory leaks.</p>
<pre class="hljs"><code><div>valgrind --leak-check=yes ./a.out
</div></code></pre>
<h3 id="static-analysys">Static analysys</h3>
<p>Static analysys is the method of examining the source code automatically without running it. This makes us an understanding about the code structure and industry standards.
Eg:</p>
<ul>
<li>Coverity ( by Synopsis )</li>
<li>CodeSonar ( by Grammatech )
<ul>
<li>Used by US food and drugs Administration and NASA</li>
</ul>
</li>
</ul>
<h1 id="section-16">Section 16</h1>
<h2 id="advanced-pointers">Advanced Pointers</h2>
<h3 id="double-pointers">Double Pointers</h3>
<p>We know that we can create pointers to any datatypes including user defined structs. What if we can make a pointer to another pointer variable. Double pointer is a pointer to a variable which stores an address of another variable. It can be created by:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">int</span> ** dp;
</div></code></pre>
<p>Example code:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> a = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">int</span> * p = &amp;a;
    <span class="hljs-keyword">int</span> ** dp = &amp;p;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of dp: %p\n"</span>,dp);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of p from dp: %p\n"</span>,*dp);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of p directly: %p\n"</span>,p);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of a from p: %d\n"</span>,*p);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of a : %d\n"</span>,a);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>We can also directly access the pointer to the pointer pointing data with a <code>**</code>.</p>
<pre class="hljs"><code><div><span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of a from dp: %d"</span>,**dp);
</div></code></pre>
<h4 id="use-cases">Use Cases</h4>
<ol>
<li>When you have to change the value of a pointer that is passed to a function.
Example:</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">myfun</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *p)</span>
</span>{
    <span class="hljs-keyword">int</span> a = <span class="hljs-number">5</span>;
    p = &amp;a;
} <span class="hljs-comment">// This function cannot affect the value of p globally.</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">myFunD</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ** dp)</span>
</span>{
    <span class="hljs-keyword">int</span> b = <span class="hljs-number">5</span>;
    *dp = &amp;b;
} <span class="hljs-comment">// This can assign the address of local variable b to a pointer and we can access it from higher scope.</span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> *ptr = (<span class="hljs-keyword">int</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>));
    *ptr = <span class="hljs-number">10</span>;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of ptr data is: %d\n"</span>, *ptr);
    myfun(ptr);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of ptr data is: %d\n"</span>, *ptr); <span class="hljs-comment">// Same Output</span>

    <span class="hljs-keyword">int</span> ** dp = &amp;ptr;
    myFunD(dp);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Value of ptr data is: %d\n"</span>, *ptr); <span class="hljs-comment">// The value will be changed.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="function-pointers">Function Pointers</h3>
<p>There are some addresses for a function also. We can:</p>
<ul>
<li>Pass them to another functions</li>
<li>Returnded from functions</li>
<li>stored in arrays</li>
<li>assigned to another function pointers.</li>
</ul>
<p>The common use case is to tell another functions that which function to use next as an argument. Also we can use <code>qsort()</code> function which takes a user defined function as an argument to sort.</p>
<p>Another use case is to build a dispatch table which is an array of function pointers which points to which function to use in a series. Menu driven programs are using this technique.</p>
<p>Unlike normal pointers we have to define the whole prototype of the function when declaring a function pointer. Because the pointer only shows the address of the code of the function. We need more info.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">int</span> (*pfunc)(<span class="hljs-keyword">int</span>,<span class="hljs-keyword">int</span>);
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addtwo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b)</span></span>{
    <span class="hljs-keyword">return</span> a + b;
}
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">subtwo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a,<span class="hljs-keyword">int</span> b)</span></span>{
    <span class="hljs-keyword">return</span> a - b;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> (*pfunc)(<span class="hljs-keyword">int</span>,<span class="hljs-keyword">int</span>);
    <span class="hljs-keyword">int</span> option;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Add (1) or Subtract(2) : "</span>);
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>,&amp;option);
    <span class="hljs-keyword">switch</span> (option)
    {
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
        pfunc = addtwo;
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
        pfunc = subtwo;
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Invalied Option...\n"</span>);
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Answer is %d\n"</span>,pfunc(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>We can also use typedef for simplifying the declaration.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">int</span><span class="hljs-params">(*funType)</span><span class="hljs-params">(<span class="hljs-keyword">int</span>,<span class="hljs-keyword">int</span>)</span></span>;

funtype pfunc = addtwo;
</div></code></pre>
<h3 id="void-pointers">Void Pointers</h3>
<p>Void pointers are pointers which do not have a specific datatype and we can store any type of data into them. Declared by:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">void</span> * vp
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">void</span> * vp;
    <span class="hljs-keyword">int</span> a = <span class="hljs-number">10</span>;
    vp = &amp;a;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%p\n"</span>,vp);
    <span class="hljs-comment">// To get the value,</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,*(<span class="hljs-keyword">int</span> *)vp);

    <span class="hljs-keyword">float</span> b = <span class="hljs-number">10.5</span>;
    vp = &amp;b;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%p\n"</span>,vp);
    <span class="hljs-comment">// To get the value,</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%f\n"</span>,*(<span class="hljs-keyword">float</span> *)vp);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h1 id="section-17">Section 17</h1>
<h2 id="static-libraries-and-shared-objects">Static libraries and shared objects</h2>
<p>We can create our own libraries and use the same code across the programs. They are called static libraries. Also we can share code using dynamic libraries at runtime.</p>
<p>library is a group of files</p>
<ul>
<li>a header <code>.h</code> file containing the prototypes called <strong>Interface</strong>.</li>
<li>The actual implementation is stored in another c file.</li>
</ul>
<p>In order to access a c function across applications it have to be seperated from the source and implemented as a library.</p>
<h3 id="advantages">Advantages</h3>
<ul>
<li>Fast compilation times.</li>
<li>Allows to make APIs for vendors.</li>
<li>Allows modular development.</li>
<li>Software reuse.</li>
<li>Version management.</li>
<li>Component specialization</li>
</ul>
<p>The linker software is responsible for collecting the libraries object files and making them available for the main program. The linker accomplishes this in two ways.</p>
<ul>
<li>Static linking
<ul>
<li>In static linking all the object code for the used library functions are compied into the main object file.</li>
</ul>
</li>
<li>Dynamic linking
<ul>
<li>In dynamic linking the binary file itself is taken into RAM in the runtime, and labeled in the main object file.</li>
</ul>
</li>
</ul>
<h3 id="static-linking">Static Linking</h3>
<p>When you perform a static linking the library code is a part of your application. The primary advantage is speed.</p>
<ul>
<li>There is no program entity resolution at the runtime. Everything is resolved.</li>
<li>Every piece of library is part of the main executable.</li>
<li>We don't have to worry about client's available library and versions.
Disadvantages:</li>
<li>Creates a larger binary files.</li>
<li>Once program is linked you have no way of correcting bugs in the library function.</li>
</ul>
<h3 id="dynamic-linking">Dynamic linking</h3>
<p>Performs linking on the fly as the programs executed.</p>
<ul>
<li>Libraries are loaded to memory only when it is executed.</li>
<li>Only have to recompile the library when any chnages are needed.</li>
<li>Also we can put a downloaded library and put it on the system and good to go ( No recompilation ).</li>
<li>More modern approach, and has a much smaller executable size.</li>
<li>More efficient use of disk and quicker linking with a runtime penalty.</li>
<li>Helps more in performance because of libraries are attatched to the process only when in need.</li>
</ul>
<h3 id="static-library">Static Library</h3>
<ul>
<li>Uses static linking.</li>
<li>each process gets a copy of the code</li>
<li>Known as an archive with a filetype of <code>.a</code></li>
</ul>
<h3 id="shared-object-library">Shared Object library</h3>
<ul>
<li>Dynamically linked at the runtime.</li>
<li>Not included in the executable and linked to the process in runtime.</li>
<li>Code is shared between and data is specific to each process.</li>
</ul>
<h3 id="library-conventions">Library conventions</h3>
<ul>
<li>Dynamic libraries are useally named <code>libsomething.so</code>.</li>
<li>Static libraries are called <code>libsomething.a</code> ( on windows <code>libsomething.lib</code> ).</li>
</ul>
<h3 id="creating-a-static-library-archive">Creating a Static Library (<em>archive</em>)</h3>
<p>It is a bunch of object files that are wrapped into a single file. Created by an archive utility.</p>
<p>Steps:</p>
<ul>
<li>First create a directory and store the source fil(main.c) and header file (myLib.h).</li>
<li>use gcc to compile the main file (headers will be automatically compiled).</li>
</ul>
<pre class="hljs"><code><div>gcc -c main.c -o lib-myLib.o
</div></code></pre>
<ul>
<li>Then use the ar utiliy to pack the .o files into a .a file.</li>
</ul>
<pre class="hljs"><code><div>ar rcs lib_myLib.a lib-myLib.o 
</div></code></pre>
<ul>
<li>Test the object files in a .a file with:</li>
</ul>
<pre class="hljs"><code><div>ar -t lib_myLib.a
</div></code></pre>
<ul>
<li>Now come back to the main program and compile it using -c.</li>
</ul>
<pre class="hljs"><code><div>gcc -I myLib/ -c sharedlib.c -o main.o
</div></code></pre>
<ul>
<li>Now link it using:</li>
</ul>
<pre class="hljs"><code><div>gcc main.o myLib/lib_myLib.a 
</div></code></pre>
<ul>
<li>You'll get a.out and be happy.</li>
</ul>
<h3 id="creating-a-dynamic-library">Creating a dynamic library</h3>
<p>Steps:</p>
<ul>
<li>First create a directory and store the source fil(main.c) and header file (myLib.h).</li>
<li>use gcc to compile the main file.</li>
</ul>
<pre class="hljs"><code><div>gcc -g -fPIC main.c -shared -o libdynLib.so
</div></code></pre>
<ul>
<li>Now come back to the main program and compile it using -c.</li>
</ul>
<pre class="hljs"><code><div>gcc -I dynLib/ -c mycode.c -o main.o
</div></code></pre>
<ul>
<li>Now link the program to the shared library</li>
</ul>
<pre class="hljs"><code><div>gcc -o main.out main.o -L dynLib/ -l dynlib
</div></code></pre>
<ul>
<li>In order to run it we have to set an environment variable.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-built_in">export</span> LD_LIBRARY_PATH=/Users/vijaysatheesh/Advanced\ C\ Programming/Section\ 17/dynlib
</div></code></pre>
<ul>
<li>You'll get a.out and be happy.</li>
</ul>
<h3 id="dynamic-loading">Dynamic loading</h3>
<p>This is used when we don't need the libraries at compile time and only needs when the program executes. So we load it dynamically.
There is an API for doing this. It is included in <code>&lt;dlfcn.h&gt;</code>.</p>
<ul>
<li>The first function <code>dlopen()</code> opens a library and prepares it for use.</li>
<li><code>void * dlopen(const char * filename,int flag)</code>.</li>
<li>There are two flags.<code>RTLD_LAZY</code> or <code>RTLD_NOW</code></li>
<li>RTLD_LAZY means to resolve undefined function calls.</li>
<li>RTLD_NOW means to resolve all undefined function calls before dlopen() returns and fail if not possible (used for debugging).</li>
<li>dlopen() returns a handle and it is used for other routines.</li>
</ul>
<p><code>dlerror()</code> function returns the errors from last call.</p>
<p>The main routine for using a dynamic library is <code>dlsym()</code> function. This looks up for a value of a function call in an opened library. Returnes NULL if the symbol not found.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;dlfcn.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">void</span> * handle = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">double</span> (*cosine) (<span class="hljs-keyword">double</span>) = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">char</span> * error = <span class="hljs-literal">NULL</span>;

    handle = dlopen(<span class="hljs-string">"/usr/lib/aarch64-linux-gnu/libm.so.6"</span>,RTLD_LAZY);

    <span class="hljs-keyword">if</span>(!handle){
        putc(dlerror(),<span class="hljs-built_in">stderr</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    dlerror();

    cosine = dlsym(handle,<span class="hljs-string">"cos"</span>);

    <span class="hljs-keyword">if</span>(!handle){
        putc(dlerror(),<span class="hljs-built_in">stderr</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%f\n"</span>,cosine(<span class="hljs-number">0.5</span>));

    dlclose(handle);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h1 id="section-18">Section 18</h1>
<h2 id="usefull-c-libraries">Usefull C libraries</h2>
<h3 id="assert">Assert</h3>
<p>Assert is a run time checking library which is defined in assert.h. It enables us to test expressions in our program and mostly used for debugging.
The program will be terminated with a diagnostic message. The termination is held by calling the abort function. This is only for finding logical errors.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;assert.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> BATT</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BATT 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    assert(BATT &gt; <span class="hljs-number">25</span>); <span class="hljs-comment">// Because Battery is important for further working..</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Working...\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Output:</p>
<pre class="hljs"><code><div>Assertion failed: (BATT &gt; 25), <span class="hljs-keyword">function</span> main, file assertfn.c, line 9.
zsh: abort      ./a.out
</div></code></pre>
<p>The assertions can be switched off by defining NDEBUG before the inclusion of assert.h</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NDEBUG</span>
<span class="hljs-comment">// #undef NDEBUG will turn assertions on</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;assert.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> BATT</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BATT 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    assert(BATT &gt; <span class="hljs-number">25</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Working...\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>We can also use assert.h library for compile time assertions. using the <code>static_assert()</code> macro.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">static_assert</span>(expression,<span class="hljs-string">"Message"</span>);
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;assert.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> BATT</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BATT 10</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">static_assert</span>(BATT &gt; <span class="hljs-number">25</span>,<span class="hljs-string">"Battery low.Compiling aborted..."</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Output:</p>
<pre class="hljs"><code><div>staticassert.c:10:5: error: static assertion failed due to requirement <span class="hljs-string">'10 &gt; 25'</span>: Battery low.Compiling aborted...
    static_assert(BATT &gt; 25,<span class="hljs-string">"Battery low.Compiling aborted..."</span>);
</div></code></pre>
<h3 id="general-functions">General Functions</h3>
<h4 id="exit"><code>exit()</code></h4>
<p>This is used to forcefully terminate the main function with an integer return value.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">exit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> status)</span></span>;
</div></code></pre>
<p>Advantages:</p>
<ul>
<li>Flushes all output and input streams</li>
<li>Closes all opened streams.</li>
<li>Closes all temperory files created by calls to the standard I/O function tempfile().</li>
</ul>
<h4 id="atexit"><code>atexit()</code></h4>
<p>This function allow us to call a function when the exit() function is evoked. Pass the pointer to the function. We can set upto 32 functions. The function cannot have any return types or arguments should be void. Typically these functions will do the housekeeping tasks.</p>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sign_off</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Program is Quitting...\nGoodbye...\n"</span>);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">another_fn</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Dummy...\n"</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    atexit(sign_off);
    atexit(another_fn);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, i);
        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">5</span>)
        {
            <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
        }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="abort"><code>abort()</code></h4>
<p>This causes an abnormal termination of the program. A signal SIGABRT will be raised ( more about signals later ). It geerates a noticable failiure and dumps core.
During abort:</p>
<ul>
<li>File buffers are not flushed.</li>
<li>Streams are not closed.</li>
<li>Temporory files are not deleted.</li>
<li>Functions passed to atexit() are not called.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">abort</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</div></code></pre>
<h4 id="qsort"><code>qsort()</code></h4>
<p>Quick sort is an efficient algorithm for sorting. It is particularly good for larger arrays.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">qsort</span><span class="hljs-params">( <span class="hljs-keyword">void</span> * base,
            <span class="hljs-keyword">size_t</span> nmemb,
            <span class="hljs-keyword">size_t</span> <span class="hljs-built_in">size</span>,
            <span class="hljs-keyword">int</span> (*compare)(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *)
  )</span>
</span></div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> data[<span class="hljs-number">5</span>] = {<span class="hljs-number">12</span>, <span class="hljs-number">43</span>, <span class="hljs-number">23</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1</span>};

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d  "</span>, data[i]);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);

    qsort(data, <span class="hljs-number">5</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>), compare);

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d  "</span>, data[i]);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *pa, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *pb)</span>
</span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> a = *(<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *)pa;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> b = *(<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *)pb;
    <span class="hljs-keyword">return</span> b - a; <span class="hljs-comment">// a-b for ascending</span>
};
</div></code></pre>
<h4 id="atoi"><code>atoi()</code></h4>
<p>This converts the ascii string numbers to integer type.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">atoi</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">char</span> a[<span class="hljs-number">10</span>] = <span class="hljs-string">"100"</span>;
    <span class="hljs-keyword">int</span> value = atoi(a); <span class="hljs-comment">// Outputs 100 as integer.</span>
}
</div></code></pre>
<h4 id="atof"><code>atof()</code></h4>
<p>This converts the ascii string floating numbers to float type.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">atof</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">char</span> a[<span class="hljs-number">10</span>] = <span class="hljs-string">"3.14"</span>;
    <span class="hljs-keyword">float</span> value = atof(a); <span class="hljs-comment">// Outputs 3.14 as float.</span>
}
</div></code></pre>
<h4 id="atol"><code>atol()</code></h4>
<p>This converts the ascii string long numbers to long integer type.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">atol</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">char</span> a[<span class="hljs-number">10</span>] = <span class="hljs-string">"1000000000"</span>;
    <span class="hljs-keyword">long</span> value = atol(a); <span class="hljs-comment">// Outputs 1000000000 as long integer.</span>
}
</div></code></pre>
<h4 id="strtod"><code>strtod()</code></h4>
<p>This converts the ascii string double numbers including trailing letters ( They will be automatically removed ) to double type.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">strtod</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>, <span class="hljs-keyword">char</span> ** st_end)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">char</span> a[<span class="hljs-number">10</span>] = <span class="hljs-string">"3.14 14.3"</span>;
    <span class="hljs-keyword">char</span> * <span class="hljs-built_in">end</span>;
    <span class="hljs-keyword">double</span> value = strtod(a,&amp;<span class="hljs-built_in">end</span>); <span class="hljs-comment">// Outputs 3.14 as double.</span>
    <span class="hljs-keyword">double</span> value <span class="hljs-number">2</span> = strtod(<span class="hljs-built_in">end</span>,<span class="hljs-literal">NULL</span>);<span class="hljs-comment">// Gets the next value.</span>

}
</div></code></pre>
<h4 id="strtol"><code>strtol()</code></h4>
<p>This converts the ascii string long numbers to long type with a base.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">strtol</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * <span class="hljs-built_in">string</span>, <span class="hljs-keyword">char</span> ** st_end,<span class="hljs-keyword">int</span> base)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">char</span> a[<span class="hljs-number">10</span>] = <span class="hljs-string">"300000 14000000000"</span>;
    <span class="hljs-keyword">char</span> * <span class="hljs-built_in">end</span>;
    <span class="hljs-keyword">long</span> value = strtod(a,&amp;<span class="hljs-built_in">end</span>,<span class="hljs-number">10</span>); <span class="hljs-comment">// Outputs 300000 as long.</span>
    <span class="hljs-keyword">long</span> value <span class="hljs-number">2</span> = strtod(<span class="hljs-built_in">end</span>,<span class="hljs-literal">NULL</span>,<span class="hljs-number">10</span>);<span class="hljs-comment">// Gets the next value.</span>

}
</div></code></pre>
<h3 id="random-numbers">Random numbers</h3>
<p>C provides two functions for generating random numbers.<code>rand()</code> and <code>srand()</code>. It generally uses hardware sources for generating random numbers like time and network traffic. It is a really hard job and it provides a seed for every random number.</p>
<h4 id="rand"><code>rand()</code></h4>
<p>It provides a random integer number. RAND_MAX defines the maximum value of a random variable in a system. It is defined in stdlib.h and have a minimum value of 32767.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">rand</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>; 
</div></code></pre>
<h4 id="srand"><code>srand()</code></h4>
<p>It controls the seed of the generated random numbers. Seed is defaulted into 1.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">srand</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> seed)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">if</span> (argc &gt; <span class="hljs-number">1</span>)
    {
        srand(atoi(argv[<span class="hljs-number">1</span>]));
    }<span class="hljs-keyword">else</span>{
        srand(<span class="hljs-number">1</span>);
    }
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,rand());
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="system"><code>system()</code></h3>
<p>This function executes a system command in a shell.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">system</span><span class="hljs-params">(<span class="hljs-keyword">char</span> * command)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    system(<span class="hljs-string">"ls -la"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="getenv"><code>getenv()</code></h3>
<p>This function returns the environment varaiable value that is passed in. Returns NULL if not found.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">char</span> * <span class="hljs-title">getenv</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * name)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s"</span>,getenv(<span class="hljs-string">"HOME"</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Output:</p>
<pre class="hljs"><code><div>/Users/vijaysatheesh
</div></code></pre>
<h3 id="memcpy"><code>memcpy()</code></h3>
<p>This copies content from consecutive memory location to another.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">memcpy</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * s1,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> * s2, <span class="hljs-keyword">size_t</span> n)</span></span>;
</div></code></pre>
<h3 id="memmoves"><code>memmoves()</code></h3>
<p>This moves content from consecutive memory location to another.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">memmove</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * s1,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> * s2, <span class="hljs-keyword">size_t</span> n)</span></span>;
</div></code></pre>
<h3 id="strdup-and-strndup"><code>strdup() and strndup()</code></h3>
<p>This is used to duplicate a string.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">char</span> * <span class="hljs-title">strdup</span><span class="hljs-params">(<span class="hljs-keyword">char</span> * source)</span></span>;
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">char</span> * <span class="hljs-title">strndup</span><span class="hljs-params">(<span class="hljs-keyword">char</span> * source,<span class="hljs-keyword">int</span> length)</span></span>;
</div></code></pre>
<h3 id="date-and-time-functions">Date and time functions</h3>
<h4 id="clock"><code>clock()</code></h4>
<p>This function returns the processor time. Often since execution began.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">clock_t</span> <span class="hljs-title">clock</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</div></code></pre>
<p>Typically measured at the start and end of the program.</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;time.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">clock_t</span> start,<span class="hljs-built_in">end</span>;
    <span class="hljs-keyword">double</span> cputime = <span class="hljs-number">0.0</span>;

    start = clock();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000000</span>; i++)
    {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">""</span>);
    }
    <span class="hljs-built_in">end</span> = clock();
    cputime = (<span class="hljs-keyword">double</span>)(<span class="hljs-built_in">end</span> - start)/CLOCKS_PER_SEC;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"CPU took %f seconds.\n"</span>,cputime);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="time"><code>time()</code></h4>
<p>Returnes the elapsed seconds from Jan 1 1970 (Calendar time).</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">time_t</span> <span class="hljs-title">time</span><span class="hljs-params">(<span class="hljs-keyword">time_t</span> * timer)</span></span>;
</div></code></pre>
<p>The function <code>difftime()</code> returnes the differences between two times.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">difftime</span><span class="hljs-params">(<span class="hljs-keyword">time_t</span> t1,<span class="hljs-keyword">time_t</span> t2)</span></span>;
</div></code></pre>
<h4 id="ctime"><code>ctime()</code></h4>
<p>Used to get todays time as a string.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">char</span> * <span class="hljs-title">ctime</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">time_t</span> * timer)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;time.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">time_t</span> currtime;
    currtime = time(<span class="hljs-number">0</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s"</span>,ctime(&amp;currtime));<span class="hljs-comment">//Sat Jul 20 16:30:36 2024</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="localtime"><code>localtime()</code></h4>
<p>Returnes the struct that includes all of the callendar details.</p>
<pre class="hljs"><code><div><span class="hljs-function">struct tm * <span class="hljs-title">localtime</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">time_t</span> * timer)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;time.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">time_t</span> currtime = time(<span class="hljs-number">0</span>);
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span> * <span class="hljs-title">localdata</span> = <span class="hljs-title">localtime</span>(&amp;<span class="hljs-title">currtime</span>);</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Year is: %d\n"</span>,localdata-&gt;tm_year + <span class="hljs-number">1900</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Month is: %d\n"</span>,localdata-&gt;tm_mon);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Day is: %d\n"</span>,localdata-&gt;tm_mday);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="asctime"><code>asctime()</code></h4>
<p>This function generates a string from the calendar data.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">char</span> * <span class="hljs-title">asctime</span><span class="hljs-params">(<span class="hljs-keyword">const</span> struct tm * time_data)</span></span>;
</div></code></pre>
<p>Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;time.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">time_t</span> currtime = time(<span class="hljs-number">0</span>);
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span> * <span class="hljs-title">localdata</span> = <span class="hljs-title">localtime</span>(&amp;<span class="hljs-title">currtime</span>);</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%s\n"</span>,asctime(localdata));
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="mktime"><code>mktime()</code></h4>
<p>This function will provide all info from a date. We have to make a tm struct and fill year month and day and feed into this function. The function will replace all other values. Returns -1 for a failiure.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">time_t</span> <span class="hljs-title">mktime</span><span class="hljs-params">(struct tm * ptime)</span></span>;
</div></code></pre>
<h4 id="gmtime"><code>gmtime()</code></h4>
<p>This function is used to covert a time value into UTC in form of struct tm.</p>
<pre class="hljs"><code><div><span class="hljs-function">struct tm * <span class="hljs-title">gmtime</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">time_t</span> * time)</span></span>;
</div></code></pre>
<h1 id="section-19">Section 19</h1>
<h2 id="data-structures">Data Structures</h2>
<p>We need different data types when programming for our needs. A type contains two things:</p>
<ul>
<li>Set of properties ( values )</li>
<li>Set of operations ( addition,subtracton,etc.. )</li>
</ul>
<h3 id="abstract-data-type-adt">Abstract Data Type (ADT)</h3>
<p>It's behaviour is defined by a set of values and operations. Kinda like structures in c. It is only mentions what operations can be performed and not how. It is called abstract because of the implementation independent view that is only showing the essentials and hiding the details.</p>
<p>Eg:</p>
<ul>
<li>lists</li>
<li>stacks</li>
<li>trees</li>
<li>hashmaps</li>
<li>etc...</li>
</ul>
<h3 id="linked-list">Linked List</h3>
<p>Linked list is essentially a Node and Link structure which have each node containing a value and a pointer to the next node. The end of the linked list have a pointer of NULL. There are two types:</p>
<ul>
<li>Singly linked list
<ul>
<li>Only next node is linked.</li>
</ul>
</li>
<li>Doubly linked list
<ul>
<li>Next and previous nodes are linked.</li>
</ul>
</li>
</ul>
<p>Advantages:</p>
<ul>
<li>They are naturally dynamic so suitable for high amount of data.</li>
<li>Prepending to a list is fast.</li>
<li>Inserting into a sorted list is very fast</li>
</ul>
<h1 id="section-20">Section 20</h1>
<h2 id="interprocess-communication">Interprocess Communication</h2>
<h3 id="process">Process</h3>
<p>A process is a program in execution. Each process has it's own memmory and address space. And usually one thread of control.</p>
<p>You can run a different process with a same program but they will have different address spaces. Each process have a parent process as a creator and the process itself is called a child. You can also have multiple processes in a same program.</p>
<p>System Call: A system call is a request or service that made by the kernal.</p>
<p>Each process is identiified with a positive integer called process id (PID). You can get the current PID with getpid() function in &lt;unistd.h&gt;.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getpid</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>; <span class="hljs-comment">// Gets the process id</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getppid</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>; <span class="hljs-comment">// Gets the parent process id </span>
</div></code></pre>
<h3 id="interprocess-communication">Interprocess communication</h3>
<p>Interprocess communication (IPC) let processes work together.</p>
<h4 id="different-ways-of-communication">Different ways of communication</h4>
<p>There are some operating system techniques to make IPC possible.
Pipes ( same process ):</p>
<ul>
<li>First communicates with second program.</li>
<li>Half duplex.</li>
<li>Used for communicating between child and parent.</li>
<li>Same as a bucket and mug mechanism.</li>
</ul>
<p>Named Pipes ( different processes, FIFO):</p>
<ul>
<li>Both process can communicate to other.</li>
<li>Full duplex.</li>
</ul>
<p>Message queues:</p>
<ul>
<li>Process will commmunicate by sender posting a message and reciever pulls it from the queue.</li>
<li>Mix of signals and sockets.</li>
</ul>
<p>Shared Memory:</p>
<ul>
<li>Communication between two or more processes achieved by sharing a piece of memory.</li>
</ul>
<p>Sockets</p>
<ul>
<li>mostly used to communicate over a network between a client and a server.</li>
</ul>
<p>Signals:</p>
<ul>
<li>Communication by raising signals.</li>
<li>Sent the signal as numbers.</li>
</ul>
<h3 id="signals">Signals</h3>
<p>Signals can be genrated by the system or the user can raise it programmatically. A process can choose to ignore or recieve the signal.</p>
<p>Cntrl + c -&gt; SIGINT
Cntrl + z -&gt; SIGSTP
fg -&gt; SIGCONT</p>
<p>There are some default signals that the program will automatically take action</p>
<table>
<thead>
<tr>
<th style="text-align:center">Signal</th>
<th style="text-align:center">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">TERM</td>
<td style="text-align:center">Terminate</td>
</tr>
<tr>
<td style="text-align:center">CORE</td>
<td style="text-align:center">Terminate and dump core</td>
</tr>
<tr>
<td style="text-align:center">IGN</td>
<td style="text-align:center">Ignore the signal</td>
</tr>
<tr>
<td style="text-align:center">STOP</td>
<td style="text-align:center">Program will stop (Cntrl + z)</td>
</tr>
<tr>
<td style="text-align:center">CONT</td>
<td style="text-align:center">The process will continue from stopping</td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-built_in">kill</span> -l
</div></code></pre>
<p>Will display all the signals that can be given to a program.</p>
<h3 id="raising-signals">Raising signals</h3>
<p>A signal can be raised by functions in &lt;string.h&gt; library.
<code>raise()</code> will send a signal to current process.<code>kill()</code> will sent signal to another process for killing it.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">raise</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sig)</span></span>;
</div></code></pre>
<p>if unsuccessfull raise will generate a nonzero value.</p>
<p><code>alarm()</code> will generate a SIGALARM and if no one catch it it will terminate after a time.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">alarm</span><span class="hljs-params">(<span class="hljs-keyword">int</span> timeinseconds)</span></span>;
</div></code></pre>
<h3 id="handling-signals">Handling signals</h3>
<p>You can let your program handle the signals that it recieves using <code>signal()</code> function. We can also ignore the signals.</p>
<p>But some signals cannot be ignored,aborted or handled.</p>
<ul>
<li>SIGKILL</li>
<li>SIGABRT</li>
<li>SIGSTOP</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">void</span> (*sigreturn) (<span class="hljs-keyword">int</span>);
    sigreturn = signal(SIGINT,signalrecieved);
</div></code></pre>
<p>There is also a sigaction() function:</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sigaction</span> <span class="hljs-title">new_action</span>;</span>
new_action.sa_flags = <span class="hljs-number">0</span>;
new_action.sa_handler = handleer;
sigemptyset(&amp;new_action.sa_mask);

sigaction(SIGINT,<span class="hljs-literal">NULL</span>,&amp;new_action);
</div></code></pre>
<h3 id="fork"><code>fork()</code></h3>
<p>Fork function is used for creating new process within a process. It can be used for stuff like multitasking.</p>
<ul>
<li>Fork creates a copy of the parent processes address space and it will not affect the parents memory. updating a memory in child won't affect in parent.</li>
</ul>
<h1 id="section-21">Section 21</h1>
<h2 id="threads">Threads</h2>
<h3 id="thread-vs-process">Thread vs Process</h3>
<ul>
<li>A thread is a lightweight process.</li>
<li>It have a unique id,program counter,register set and a stack space just like process.</li>
<li>Threads share memory between processes unlike processes.</li>
<li>All threads have access to all the files and signals.</li>
</ul>
<h3 id="posix-threads">POSIX Threads</h3>
<p>Threads are popular way to improve an application through parellelism.</p>
<ul>
<li>C11 Doesnt have a thread support and it is not portable. So we can use POSIX threads in UNIX systems ( pthreads ).</li>
<li>Allows to spawn a new concurrent process flow.</li>
<li>Can be found on any modern POSIX complaint OS.</li>
<li>Gain speed through parellel distributing and processing.</li>
</ul>
<h3 id="creating-a-thread">Creating a thread</h3>
<p><code>pthread_create()</code> can be used for this.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">pthread_create</span><span class="hljs-params">(<span class="hljs-keyword">pthread_t</span> * thread,<span class="hljs-keyword">const</span> <span class="hljs-keyword">pthread_attr_t</span> * attr,<span class="hljs-keyword">void</span> * (*start_routine)(<span class="hljs-keyword">void</span> *),<span class="hljs-keyword">void</span> * arg)</span></span>;
</div></code></pre>
<p>thread -&gt; used to identify the thread.
attr -&gt; can specify attribute objects.
start_routine -&gt; name of the function to be executed.
arg -&gt; arguments to pass to that function.</p>
<p>We can also use pthread_join() for creating and also used for knowing a thread is completed and exited. Used to link current thread to a new thread. It will stop the program for the selected thread to stop.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">pthread_join</span><span class="hljs-params">(<span class="hljs-keyword">pthread_t</span> thread,<span class="hljs-keyword">void</span> ** value_ptr)</span></span>;
</div></code></pre>
<p>thread -&gt; thread id of the thread to wait for.</p>
<p>value_ptr -&gt; This will be passed to the pthread_exit() when it is not NULL</p>
<p>We can also exit a thread using pthread_exit()</p>
<ul>
<li>By explicitly calling it</li>
<li>By letting thread function return</li>
<li>calling exit() function also close all threads.</li>
</ul>
<p>If main() finishes before threads the threads will continue.pthread_exit() is typically called when thread is finished and no longer required to exit.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pthread_exit</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * value_ptr)</span></span>;
</div></code></pre>
<p>value_ptr -&gt; this value will be passed to any successfull joining.
Example:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">threadFn</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This is a thread...\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">pthread_t</span> thread = <span class="hljs-number">0</span>;
    pthread_create(&amp;thread,<span class="hljs-literal">NULL</span>,threadFn,<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// Creates a thread</span>
    pthread_join(thread,<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// Waits for the thread to finish</span>
    pthread_exit(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// Close all the threads</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="passing-arguments-into-threads">Passing arguments into threads</h3>
<p>Examples:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">thread1</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * message)</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This is thread 1 and pass is %s\n"</span>,(<span class="hljs-keyword">char</span> *) message);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">thread2</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * message)</span></span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This is thread 2 and pass is %s\n"</span>,(<span class="hljs-keyword">char</span> *) message);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">char</span> * mess1 = <span class="hljs-string">"STRONGPASS"</span>;
    <span class="hljs-keyword">char</span> * mess2 = <span class="hljs-string">"ANOTHERSTRONGPASS"</span>;

    <span class="hljs-keyword">pthread_t</span> t1,t2;

    <span class="hljs-keyword">int</span> t1ret = pthread_create(&amp;t1,<span class="hljs-literal">NULL</span>,thread1,(<span class="hljs-keyword">void</span> *) mess1);
    <span class="hljs-keyword">int</span> t2ret = pthread_create(&amp;t2,<span class="hljs-literal">NULL</span>,thread2,(<span class="hljs-keyword">void</span> *) mess2);

    pthread_join(t1,<span class="hljs-literal">NULL</span>);
    pthread_join(t2,<span class="hljs-literal">NULL</span>);

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Process finished and T1 returned %d and T2 returned %d\n"</span>,t1ret,t2ret);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Multiple Arguments:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span>{</span>
    <span class="hljs-keyword">int</span> dummyvalue;
    <span class="hljs-keyword">char</span> * message;
};

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">thread1</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * message)</span></span>{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> * <span class="hljs-title">m</span> = (<span class="hljs-title">struct</span> <span class="hljs-title">thread_data</span> *) <span class="hljs-title">message</span>;</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This is thread 1. Dummy is %d and pass is %s\n"</span>,m-&gt;dummyvalue,m-&gt;message);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">thread2</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * message)</span></span>{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> * <span class="hljs-title">m</span> = (<span class="hljs-title">struct</span> <span class="hljs-title">thread_data</span> *) <span class="hljs-title">message</span>;</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This is thread 2. Dummy is %d and pass is %s\n"</span>,m-&gt;dummyvalue,m-&gt;message);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
     
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> <span class="hljs-title">d1</span> = {</span><span class="hljs-number">10</span>,<span class="hljs-string">"Hi thread 1..."</span>};
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> <span class="hljs-title">d2</span> = {</span><span class="hljs-number">30</span>,<span class="hljs-string">"Hi thread 2..."</span>};
    <span class="hljs-keyword">pthread_t</span> t1,t2;

    <span class="hljs-keyword">int</span> t1ret = pthread_create(&amp;t1,<span class="hljs-literal">NULL</span>,thread1,(<span class="hljs-keyword">void</span> *) &amp;d1);
    <span class="hljs-keyword">int</span> t2ret = pthread_create(&amp;t2,<span class="hljs-literal">NULL</span>,thread2,(<span class="hljs-keyword">void</span> *) &amp;d2);

    pthread_join(t1,<span class="hljs-literal">NULL</span>);
    pthread_join(t2,<span class="hljs-literal">NULL</span>);

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Process finished and T1 returned %d and T2 returned %d\n"</span>,t1ret,t2ret);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>Returning from thread:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span>{</span>
    <span class="hljs-keyword">int</span> dummyvalue;
    <span class="hljs-keyword">char</span> * message;
};

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">thread1</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * message)</span></span>{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> * <span class="hljs-title">m</span> = (<span class="hljs-title">struct</span> <span class="hljs-title">thread_data</span> *) <span class="hljs-title">message</span>;</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This is thread 1. Dummy is %d and pass is %s\n"</span>,m-&gt;dummyvalue,m-&gt;message);
    <span class="hljs-keyword">char</span> * result1 = <span class="hljs-string">"This is a result from thread 1"</span>;
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">void</span> * ) result1;
}

<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">thread2</span><span class="hljs-params">(<span class="hljs-keyword">void</span> * message)</span></span>{
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> * <span class="hljs-title">m</span> = (<span class="hljs-title">struct</span> <span class="hljs-title">thread_data</span> *) <span class="hljs-title">message</span>;</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"This is thread 2. Dummy is %d and pass is %s\n"</span>,m-&gt;dummyvalue,m-&gt;message);
    <span class="hljs-keyword">char</span> * result2 = <span class="hljs-string">"This is a result from thread 2"</span>;
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">void</span> * ) result2;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span> *argv[])</span>
</span>{
     
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> <span class="hljs-title">d1</span> = {</span><span class="hljs-number">10</span>,<span class="hljs-string">"Hi thread 1..."</span>};
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">thread_data</span> <span class="hljs-title">d2</span> = {</span><span class="hljs-number">30</span>,<span class="hljs-string">"Hi thread 2..."</span>};
    <span class="hljs-keyword">pthread_t</span> t1,t2;

    <span class="hljs-keyword">int</span> t1ret = pthread_create(&amp;t1,<span class="hljs-literal">NULL</span>,thread1,(<span class="hljs-keyword">void</span> *) &amp;d1);
    <span class="hljs-keyword">int</span> t2ret = pthread_create(&amp;t2,<span class="hljs-literal">NULL</span>,thread2,(<span class="hljs-keyword">void</span> *) &amp;d2);

    <span class="hljs-keyword">char</span> * result1;
    <span class="hljs-keyword">char</span> * result2;

    pthread_join(t1,(<span class="hljs-keyword">void</span> **) &amp;result1);
    pthread_join(t2,(<span class="hljs-keyword">void</span> **) &amp;result2);

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Process finished and T1 returned %d with result \"%s\".\n"</span>,t1ret,result1);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Process finished and T2 returned %d with result \"%s\".\n"</span>,t2ret,result2);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="common-thread-functions">Common thread functions</h3>
<table>
<thead>
<tr>
<th style="text-align:center">Function</th>
<th style="text-align:center">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>pthreads_self()</code></td>
<td style="text-align:center">Returns the current thread id</td>
</tr>
<tr>
<td style="text-align:center"><code>pthread_detatch()</code></td>
<td style="text-align:center">Makes the thread detatched from the parent. So it cannot be joined</td>
</tr>
<tr>
<td style="text-align:center"><code>pthread_equal()</code></td>
<td style="text-align:center">Comparing two pids. == wont work</td>
</tr>
<tr>
<td style="text-align:center"><code>pthread_once()</code></td>
<td style="text-align:center">execute init_routine exactly once. Calling again will have no effect.</td>
</tr>
<tr>
<td style="text-align:center"><code>pthread_cancel()</code></td>
<td style="text-align:center">Cancels a thread id</td>
</tr>
</tbody>
</table>
<h3 id="thread-synchronisation">Thread Synchronisation</h3>
<h4 id="race-condition">Race condition</h4>
<ul>
<li>The threads are executes at random by the OS.</li>
<li>It also executes at different speeds.</li>
<li>They will race to finish and it will give unexpected results.</li>
<li>Some data will read and write at the same time.</li>
</ul>
<h4 id="deadlocks">Deadlocks</h4>
<ul>
<li>Two threads are sharing the same resources and effectively preventing each other from accessing this resource.</li>
</ul>
<h4 id="thread-safe-code">Thread safe code</h4>
<ul>
<li>There are no static or global varibles that a thread may share.</li>
<li>Program should protect shared data.</li>
</ul>
<h3 id="mutual-exclusion-atomic-operations-and-condition-variables">Mutual Exclusion, Atomic operations and condition variables.</h3>
<p>When a code contains a shared resource (critical code) which is accessed by multiple threads. It is important minimize these codes. Mutual exclusion is a process of serializing access to shared resources.
Mutex is a lock that can be put on shared resources. Only one thread can have the key at a time. Atomic operations allow  to modify some variables in a multithread context. Condition varaibles acts as flags or notificaition systems between threads. We can also use broadcast mechanism to signal all threads.</p>
<h3 id="mutexes">Mutexes</h3>
<p>pthread.h provides three synchroniaztion methods</p>
<ul>
<li>mutexes : Lock or block access to variables by other threads</li>
<li>joins : Make a thread wait untill one finishes</li>
<li>condition variables - Communicating between threads.</li>
</ul>
<h1 id="section-22">Section 22</h1>
<h2 id="networking">Networking</h2>
<h3 id="tcp-protocol">TCP Protocol</h3>
<p>Transmission control protocol is a standard to establish and maintain network connections.TCP is a connection oriented program.It establishes the connection and maintain it untill all packet have been sent.</p>
<p>Features:</p>
<ul>
<li>Connection oriented</li>
<li>Reliable</li>
<li>Handles loss packet</li>
<li>Packet sequencing</li>
<li>Handles duplicated packets</li>
<li>Full duplex</li>
<li>Flow control</li>
<li>Congestion control</li>
</ul>
<h3 id="client---server-model">Client - Server Model</h3>
<ul>
<li>Client  Request  Server  Processing  Response</li>
<li>typically uses TCP/IP protocol</li>
<li>A central server can connect to multiple clients</li>
<li>A special server called daemon is created for awaiting multiple clients.</li>
</ul>
<h3 id="types-of-servers">Types of servers</h3>
<ul>
<li>Iterative server
<ul>
<li>simple</li>
<li>handles client one by one</li>
<li>the client will wait for their turn</li>
</ul>
</li>
<li>Concurrent Servers
<ul>
<li>Runs multiple concurrent processes to serve many requests at a time.</li>
<li>one process may take long but no waiting</li>
<li>Done by forking</li>
</ul>
</li>
</ul>
<h3 id="sockets">Sockets</h3>
<p>Sockets are virtual endpoints that two computers can connect. One socket listens to a particular port in an address. Other socket reaches out to form a connection.</p>
<h4 id="steps">Steps:</h4>
<ul>
<li>Create a new connection</li>
<li>Attatch a local address to a socket (bind)</li>
<li>Announce the acceptance (listen)</li>
<li>Block caller until a request arrives.</li>
<li>Actively attempt to establish a connection (connect)</li>
<li>Send data</li>
<li>Recieve some data</li>
<li>Release the connection (close)</li>
</ul>
<h3 id="the-sockets-api">The sockets API</h3>
<ul>
<li>&lt;sys/socket.h&gt; include the main socket API.</li>
<li>&lt;sys/types.h&gt; for some type defenitions.</li>
<li>&lt;netinet/in.h&gt; for constants and structs need for internet domain addresses.</li>
<li>&lt;netdb.h&gt; defines the structure hostent</li>
<li>&lt;arpa/inet.h&gt; defines the in_addr structure.</li>
</ul>
<h3 id="ports">Ports</h3>
<ul>
<li>Computer may need to run multiple servers or clients.</li>
<li>So they uses a different port.</li>
<li>A port will be an integer between 1024 and 65535</li>
<li>Port below 1024 are well known system ports.</li>
</ul>
<h3 id="structs-use-for-network-programming">Structs use for network programming</h3>
<h4 id="sockaddr">sockaddr</h4>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr</span>{</span>
    <span class="hljs-keyword">unsigned</span> short sa_family;
    <span class="hljs-keyword">char</span> sa_data[<span class="hljs-number">14</span>];
}
</div></code></pre>
<ul>
<li>sa_family : Represents an address family. sa_family can be:
<ul>
<li>AF_INET (Mostly used)</li>
<li>AF_UNIX</li>
<li>AF_NS</li>
<li>AF_IMPLINK</li>
</ul>
</li>
<li>sa_data: Is a protocol specific address.</li>
</ul>
<h4 id="sockaddrin">sockaddr_in</h4>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span>{</span>
    short <span class="hljs-keyword">int</span> sin_family;
    <span class="hljs-keyword">unsigned</span> short <span class="hljs-keyword">int</span> sin_port;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">in_addr</span> <span class="hljs-title">sin_addr</span>;</span>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> sin_zero[<span class="hljs-number">8</span>]
}
</div></code></pre>
<p>This structure uses in_addr as a strcture field and holds the 32bit netid/hostid</p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">in_addr</span>{</span>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> s_addr;
}
</div></code></pre>
<h4 id="hostent">hostent</h4>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hostent</span>{</span>
    <span class="hljs-keyword">char</span> * h_name;
    <span class="hljs-keyword">char</span> ** h_aliases;
    <span class="hljs-keyword">int</span> h_addrtype;
    <span class="hljs-keyword">int</span> h_length;
    <span class="hljs-keyword">char</span> ** h_addr_list;

    <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> h_addr h_addr_list[0]</span>
}
</div></code></pre>
<p>This structure is used to hold information related to host.</p>
<h3 id="functions-for-socket-connection">Functions for socket connection</h3>
<h4 id="socket">socket()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">socket</span><span class="hljs-params">(<span class="hljs-keyword">int</span> family,<span class="hljs-keyword">int</span> type,<span class="hljs-keyword">int</span> protocol)</span></span>;
</div></code></pre>
<p>returns a socket discriptor that can be used later and -1 for error.</p>
<h4 id="connect">connect()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">connect</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,struct sockaddr * serv_addr,<span class="hljs-keyword">int</span> addrlen)</span></span>;
</div></code></pre>
<p>sockfd - Socket discriptor from socket()
serv_addr - contains destination ip address and ports.
addrlen - sizeof(struct sockaddr)</p>
<p>Returns zero for success and -1 for error.</p>
<h4 id="bind">bind()</h4>
<p>bind binds a port and an ip to a socket.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">bind</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,struct sockaddr * serv_addr,<span class="hljs-keyword">int</span> addrlen)</span></span>;
</div></code></pre>
<p>sockfd - Socket discriptor from socket()
serv_addr - contains destination ip address and ports.
addrlen - sizeof(struct sockaddr)</p>
<p>Returns zero for success and -1 for error.</p>
<h4 id="listen">listen()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">listen</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">int</span> backlog)</span></span>;
</div></code></pre>
<p>Tells the operating system to listen upto N clients and make them wait. N+1 th client will recieve a server busy. It wont answer but it will let them wait.</p>
<p>Returns zero for success and -1 for error.</p>
<h4 id="accept">accept()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">accept</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,struct sockaddr * cliaddr,<span class="hljs-keyword">socklen_t</span> * addrlen)</span></span>;
</div></code></pre>
<p>cliaddr -&gt; points to the client's IP address and port
addrlen - sizeof(struct sockaddr)</p>
<p>Returns non-negative discripter on success and -1 on error.</p>
<h4 id="recv">recv()</h4>
<p>Recieve data from a connected socket</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">recv</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">void</span> * buf,<span class="hljs-keyword">int</span> len,<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> flags)</span></span>;
</div></code></pre>
<p>buf - buffer to store data
len - max length of buffer
flags - Set to zero</p>
<p>Returns number of bytes read and return -1 on error</p>
<h4 id="recvfrom">recvfrom()</h4>
<p>Recieve data from an unconnected socket.</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">recvfrom</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">void</span> * buf,<span class="hljs-keyword">int</span> len,<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> flags,struct sockaddr * from,<span class="hljs-keyword">int</span> * fromlen)</span></span>;
</div></code></pre>
<p>buf - buffer to store data
len - max length of buffer
flags - Set to zero
from - contains destination ip address and ports.
fromlen - sizeof(struct sockaddr)</p>
<p>Returns number of bytes read and return -1 on error</p>
<h4 id="write">write()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">write</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> * buf,<span class="hljs-keyword">int</span> nbytes,<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> flags)</span></span>;
</div></code></pre>
<p>buf - buffer to send
nbytes - max length of buffer</p>
<p>Returns -1 for error</p>
<h4 id="send">send()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">send</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> * msg,<span class="hljs-keyword">int</span> len,<span class="hljs-keyword">int</span> flags)</span></span>;
</div></code></pre>
<p>msg - pointer to msg to send
len - length of msg
flags - Set to zero</p>
<p>Returns number of bytes send and return -1 on error</p>
<h4 id="sendto">sendto()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sendto</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> * msg,<span class="hljs-keyword">int</span> len,<span class="hljs-keyword">int</span> flags,struct sockaddr * to,<span class="hljs-keyword">int</span> * tolen)</span></span>;
</div></code></pre>
<p>msg - pointer to msg to send
len - length of msg
flags - Set to zero
to - contains source ip address and ports.
tolen - sizeof(struct sockaddr)</p>
<p>Returns number of bytes send and return -1 on error</p>
<h4 id="read">read()</h4>
<p>Reads a file associated to a buffer</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">read</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> * buf,<span class="hljs-keyword">int</span> nbytes)</span></span>;
</div></code></pre>
<p>buf - buffer to send
nbytes - max length of buffer</p>
<p>Returns -1 for error</p>
<h4 id="close">close()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">close</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd)</span></span>;
</div></code></pre>
<p>closes a connection defined by sockfd.</p>
<h4 id="shutdown">shutdown()</h4>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">shutdown</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd,<span class="hljs-keyword">int</span> how)</span></span>;
</div></code></pre>
<p>closes a connection defined by sockfd more gracefully
how:</p>
<ul>
<li>0 -&gt; recieving not allowed</li>
<li>1 -&gt; sending not allowed</li>
<li>2 -&gt; same thing as close() ( both are not allowed )</li>
</ul>

</body>
</html>
